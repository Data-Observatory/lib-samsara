
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tutorial de uso paquete samsara en Data Cube Chile &#8212; SAMSARA 0.2.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../pygments.css?v=d10597a4" />
    <link rel="stylesheet" type="text/css" href="../graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../nbsphinx-code-cells.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../documentation_options.js?v=37f418d5"></script>
    <script src="../doctools.js?v=9a2dae69"></script>
    <script src="../sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_static/notebooks/01_SAMSARA_app';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Contributing" href="../../contributing.html" />
    <link rel="prev" title="Tutorial" href="../../tutorial.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Apr 29, 2024"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">SAMSARA 0.2.1 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../readme.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../installation.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../usage.html">
                        Usage
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../../tutorial.html">
                        Tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../contributing.html">
                        Contributing
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../authors.html">
                        Authors
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../changelog.html">
                        Changelog
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../autoapi/index.html">
                        API Reference
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Data-Observatory/lib-samsara/" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../readme.html">
                        Overview
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../installation.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../usage.html">
                        Usage
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../../tutorial.html">
                        Tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../contributing.html">
                        Contributing
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links-2">
                    More
                </button>
                <ul id="pst-nav-more-links-2" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../authors.html">
                        Authors
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../changelog.html">
                        Changelog
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="../../autoapi/index.html">
                        API Reference
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Data-Observatory/lib-samsara/" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<div id="searchbox"></div></div>
        <div class="sidebar-primary-item">
<h3><a href="../../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../readme.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tutorial de uso paquete samsara en Data Cube Chile</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/index.html">API Reference</a></li>
</ul>
</div>
        <div class="sidebar-primary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/_static/notebooks/01_SAMSARA_app.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../tutorial.html" class="nav-link">Tutorial</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Tutorial de...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="Tutorial-de-uso-paquete-samsara-en-Data-Cube-Chile">
<h1>Tutorial de uso paquete samsara en Data Cube Chile<a class="headerlink" href="#Tutorial-de-uso-paquete-samsara-en-Data-Cube-Chile" title="Link to this heading">#</a></h1>
<p>Bienvenidos a este tutorial para el uso de la <a class="reference external" href="https://github.com/Data-Observatory/lib-samsara/tree/main">librería samsara</a> en Data Cube Chile.</p>
<p>En esta sesión revisaremos cómo el proyecto SAMSARA logra la detección de cambios negativos en matorrales y bosques en un sector de la región Metropolitana.</p>
<p>Primero, debemos cerciorarnos de que tenemos replicado (clonando) el repositorio de entrenamiento básico: <a class="github reference external" href="https://github.com/Data-Observatory/DataCubeTraining">Data-Observatory/DataCubeTraining</a>. Es primordial que este repositorio esté ya en la sesión de cada uno. Si no está, se puede descargar ejecutando lo siguiente en la consola <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/Data-Observatory/DataCubeTraining.git</span></code></p>
<p>Segundo, descargamos la librería a nuestro local. Procurar hacer esto estando dentro de la carpeta <code class="docutils literal notranslate"><span class="pre">DataCubeTraining</span> <span class="pre">/intermedio</span></code> con el siguiente código (¡esto solo debe ejecutarse una vez!):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/Data-Observatory/lib-samsara.git
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Cloning into &#39;lib-samsara&#39;...
remote: Enumerating objects: 1226, done.
remote: Counting objects: 100% (551/551), done.
remote: Compressing objects: 100% (301/301), done.
remote: Total 1226 (delta 208), reused 404 (delta 185), pack-reused 675
Receiving objects: 100% (1226/1226), 2.05 MiB | 5.46 MiB/s, done.
Resolving deltas: 100% (593/593), done.
</pre></div></div>
</div>
<p>Y luego, para utilizar las funciones de la librería, ejecutaremos la siguiente celda.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;lib-samsara/src&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<section id="Librerías-requeridas">
<h2>Librerías requeridas<a class="headerlink" href="#Librerías-requeridas" title="Link to this heading">#</a></h2>
<p>En primer lugar utilizaremos las siguientes librerías</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">rioxarray</span>
<span class="kn">import</span> <span class="nn">rasterio</span> <span class="k">as</span> <span class="nn">rio</span>
<span class="kn">from</span> <span class="nn">rasterio.enums</span> <span class="kn">import</span> <span class="n">Resampling</span>
<span class="kn">from</span> <span class="nn">dea_tools.classification</span> <span class="kn">import</span> <span class="n">predict_xr</span>
<span class="kn">import</span> <span class="nn">datacube</span>
<span class="kn">from</span> <span class="nn">datacube.utils</span> <span class="kn">import</span> <span class="n">masking</span>
<span class="kn">import</span> <span class="nn">dask.array</span> <span class="k">as</span> <span class="nn">da</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;USE_PYGEOS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">from</span> <span class="nn">scipy.ndimage</span> <span class="kn">import</span> <span class="n">convolve</span>
<span class="kn">import</span> <span class="nn">joblib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">dea_tools.plotting</span> <span class="kn">import</span> <span class="n">display_map</span>
<span class="kn">from</span> <span class="nn">datacube.utils.rio</span> <span class="kn">import</span> <span class="n">configure_s3_access</span>
<span class="kn">from</span> <span class="nn">dask.distributed</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">LocalCluster</span>
<span class="kn">from</span> <span class="nn">dask_gateway</span> <span class="kn">import</span> <span class="n">Gateway</span>
</pre></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="Configuración-inicial">
<h2>Configuración inicial<a class="headerlink" href="#Configuración-inicial" title="Link to this heading">#</a></h2>
<p>Luego, configuraremos el acceso a imágenes de Data Cube Chile en Amazon Web Services.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span> <span class="o">=</span> <span class="n">LocalCluster</span><span class="p">()</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
<span class="n">configure_s3_access</span><span class="p">(</span><span class="n">aws_unsigned</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">requester_pays</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">client</span> <span class="o">=</span> <span class="n">client</span><span class="p">)</span>

<span class="n">client</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
    <div style="width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;"> </div>
    <div style="margin-left: 48px;">
        <h3 style="margin-bottom: 0px;">Client</h3>
        <p style="color: #9D9D9D; margin-bottom: 0px;">Client-b47a7def-ae5f-11ee-9040-ba3ef9f291fb</p>
        <table style="width: 100%; text-align: left;">

        <tr>

            <td style="text-align: left;"><strong>Connection method:</strong> Cluster object</td>
            <td style="text-align: left;"><strong>Cluster type:</strong> distributed.LocalCluster</td>

        </tr>


            <tr>
                <td style="text-align: left;">
                    <strong>Dashboard: </strong> <a href="http://127.0.0.1:8787/status" target="_blank">http://127.0.0.1:8787/status</a>
                </td>
                <td style="text-align: left;"></td>
            </tr>


        </table>


            <button style="margin-bottom: 12px;" data-commandlinker-command="dask:populate-and-launch-layout" data-commandlinker-args='{"url": "http://127.0.0.1:8787/status" }'>
                Launch dashboard in JupyterLab
            </button>



            <details>
            <summary style="margin-bottom: 20px;"><h3 style="display: inline;">Cluster Info</h3></summary>
            <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-mod-trusted jp-OutputArea-output">
    <div style="width: 24px; height: 24px; background-color: #e1e1e1; border: 3px solid #9D9D9D; border-radius: 5px; position: absolute;">
    </div>
    <div style="margin-left: 48px;">
        <h3 style="margin-bottom: 0px; margin-top: 0px;">LocalCluster</h3>
        <p style="color: #9D9D9D; margin-bottom: 0px;">7b062528</p>
        <table style="width: 100%; text-align: left;">
            <tr>
                <td style="text-align: left;">
                    <strong>Dashboard:</strong> <a href="http://127.0.0.1:8787/status" target="_blank">http://127.0.0.1:8787/status</a>
                </td>
                <td style="text-align: left;">
                    <strong>Workers:</strong> 4
                </td>
            </tr>
            <tr>
                <td style="text-align: left;">
                    <strong>Total threads:</strong> 8
                </td>
                <td style="text-align: left;">
                    <strong>Total memory:</strong> 29.00 GiB
                </td>
            </tr>

            <tr>
    <td style="text-align: left;"><strong>Status:</strong> running</td>
    <td style="text-align: left;"><strong>Using processes:</strong> True</td>
</tr>


        </table>

        <details>
            <summary style="margin-bottom: 20px;">
                <h3 style="display: inline;">Scheduler Info</h3>
            </summary>

            <div style="">
    <div>
        <div style="width: 24px; height: 24px; background-color: #FFF7E5; border: 3px solid #FF6132; border-radius: 5px; position: absolute;"> </div>
        <div style="margin-left: 48px;">
            <h3 style="margin-bottom: 0px;">Scheduler</h3>
            <p style="color: #9D9D9D; margin-bottom: 0px;">Scheduler-09c3c163-1da9-4972-991d-3142c4b5a636</p>
            <table style="width: 100%; text-align: left;">
                <tr>
                    <td style="text-align: left;">
                        <strong>Comm:</strong> tcp://127.0.0.1:39435
                    </td>
                    <td style="text-align: left;">
                        <strong>Workers:</strong> 4
                    </td>
                </tr>
                <tr>
                    <td style="text-align: left;">
                        <strong>Dashboard:</strong> <a href="http://127.0.0.1:8787/status" target="_blank">http://127.0.0.1:8787/status</a>
                    </td>
                    <td style="text-align: left;">
                        <strong>Total threads:</strong> 8
                    </td>
                </tr>
                <tr>
                    <td style="text-align: left;">
                        <strong>Started:</strong> Just now
                    </td>
                    <td style="text-align: left;">
                        <strong>Total memory:</strong> 29.00 GiB
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <details style="margin-left: 48px;">
        <summary style="margin-bottom: 20px;">
            <h3 style="display: inline;">Workers</h3>
        </summary>


        <div style="margin-bottom: 20px;">
            <div style="width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;"> </div>
            <div style="margin-left: 48px;">
            <details>
                <summary>
                    <h4 style="margin-bottom: 0px; display: inline;">Worker: 0</h4>
                </summary>
                <table style="width: 100%; text-align: left;">
                    <tr>
                        <td style="text-align: left;">
                            <strong>Comm: </strong> tcp://127.0.0.1:44361
                        </td>
                        <td style="text-align: left;">
                            <strong>Total threads: </strong> 2
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">
                            <strong>Dashboard: </strong> <a href="http://127.0.0.1:39483/status" target="_blank">http://127.0.0.1:39483/status</a>
                        </td>
                        <td style="text-align: left;">
                            <strong>Memory: </strong> 7.25 GiB
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">
                            <strong>Nanny: </strong> tcp://127.0.0.1:46521
                        </td>
                        <td style="text-align: left;"></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: left;">
                            <strong>Local directory: </strong> /tmp/dask-scratch-space/worker-_ahdijeg
                        </td>
                    </tr>





                </table>
            </details>
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <div style="width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;"> </div>
            <div style="margin-left: 48px;">
            <details>
                <summary>
                    <h4 style="margin-bottom: 0px; display: inline;">Worker: 1</h4>
                </summary>
                <table style="width: 100%; text-align: left;">
                    <tr>
                        <td style="text-align: left;">
                            <strong>Comm: </strong> tcp://127.0.0.1:33707
                        </td>
                        <td style="text-align: left;">
                            <strong>Total threads: </strong> 2
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">
                            <strong>Dashboard: </strong> <a href="http://127.0.0.1:46591/status" target="_blank">http://127.0.0.1:46591/status</a>
                        </td>
                        <td style="text-align: left;">
                            <strong>Memory: </strong> 7.25 GiB
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">
                            <strong>Nanny: </strong> tcp://127.0.0.1:43345
                        </td>
                        <td style="text-align: left;"></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: left;">
                            <strong>Local directory: </strong> /tmp/dask-scratch-space/worker-omsxd4f4
                        </td>
                    </tr>





                </table>
            </details>
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <div style="width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;"> </div>
            <div style="margin-left: 48px;">
            <details>
                <summary>
                    <h4 style="margin-bottom: 0px; display: inline;">Worker: 2</h4>
                </summary>
                <table style="width: 100%; text-align: left;">
                    <tr>
                        <td style="text-align: left;">
                            <strong>Comm: </strong> tcp://127.0.0.1:38689
                        </td>
                        <td style="text-align: left;">
                            <strong>Total threads: </strong> 2
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">
                            <strong>Dashboard: </strong> <a href="http://127.0.0.1:44493/status" target="_blank">http://127.0.0.1:44493/status</a>
                        </td>
                        <td style="text-align: left;">
                            <strong>Memory: </strong> 7.25 GiB
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">
                            <strong>Nanny: </strong> tcp://127.0.0.1:40887
                        </td>
                        <td style="text-align: left;"></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: left;">
                            <strong>Local directory: </strong> /tmp/dask-scratch-space/worker-k56y5kaz
                        </td>
                    </tr>





                </table>
            </details>
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <div style="width: 24px; height: 24px; background-color: #DBF5FF; border: 3px solid #4CC9FF; border-radius: 5px; position: absolute;"> </div>
            <div style="margin-left: 48px;">
            <details>
                <summary>
                    <h4 style="margin-bottom: 0px; display: inline;">Worker: 3</h4>
                </summary>
                <table style="width: 100%; text-align: left;">
                    <tr>
                        <td style="text-align: left;">
                            <strong>Comm: </strong> tcp://127.0.0.1:32865
                        </td>
                        <td style="text-align: left;">
                            <strong>Total threads: </strong> 2
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">
                            <strong>Dashboard: </strong> <a href="http://127.0.0.1:39291/status" target="_blank">http://127.0.0.1:39291/status</a>
                        </td>
                        <td style="text-align: left;">
                            <strong>Memory: </strong> 7.25 GiB
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">
                            <strong>Nanny: </strong> tcp://127.0.0.1:44773
                        </td>
                        <td style="text-align: left;"></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="text-align: left;">
                            <strong>Local directory: </strong> /tmp/dask-scratch-space/worker-vwecks24
                        </td>
                    </tr>





                </table>
            </details>
            </div>
        </div>


    </details>
</div>

        </details>
    </div>
</div>
            </details>


    </div>
</div></div>
</div>
<blockquote>
<div><p><strong>Nota:</strong> ¿Quieres ver un dashboard donde se muestre el progreso realizado?: ingresa al siguiente enlace <code class="docutils literal notranslate"><span class="pre">https://hub.datacubechile.cl/user/USUARIO/proxy/8787/status</span></code> reemplazando <code class="docutils literal notranslate"><span class="pre">USUARIO</span></code> por tu nombre de usuario. Posiblemente debas reemplazar el puerto <code class="docutils literal notranslate"><span class="pre">8787</span></code> por algúno que entregue el cliente donde dice <code class="docutils literal notranslate"><span class="pre">dashboard</span></code>, después del <code class="docutils literal notranslate"><span class="pre">:</span></code> y antes del <code class="docutils literal notranslate"><span class="pre">/status</span></code></p>
</div></blockquote>
</section>
<hr class="docutils" />
<section id="Área-de-interés">
<h2>Área de interés<a class="headerlink" href="#Área-de-interés" title="Link to this heading">#</a></h2>
<p>Ahora, definiremos la extensión del área de estudio.</p>
<p>En el transcurso del notebook veremos que hay distintos radios asociado a los vecindarios o kernels. Estos están definidos en la siguiente celda con el objetivo de aplicar un buffer al área de interés. De esta manera, utilizaremos Data Cube Chile para obtener las imágenes una zona, que contiene la totalidad de pixeles requeridos en los procesos de filtro o convolución.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">neighbor_radius</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">smooth_radius</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">glcm_radius</span> <span class="o">=</span> <span class="mi">7</span>
<span class="n">max_radius</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">neighbor_radius</span><span class="p">,</span> <span class="n">smooth_radius</span><span class="p">,</span> <span class="n">glcm_radius</span><span class="p">]))</span> <span class="o">+</span> <span class="mi">5</span>
<span class="nb">print</span><span class="p">(</span><span class="n">max_radius</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
55
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">poly</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="s2">&quot;denuncias.gpkg&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span> <span class="o">=</span> <span class="s2">&quot;32719&quot;</span><span class="p">)</span>
<span class="n">poly</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="n">poly</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">431</span><span class="p">]</span> <span class="c1"># Solo Poligono de Peñalolen</span>
<span class="n">buf_poly</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">distance</span> <span class="o">=</span> <span class="mi">30</span><span class="o">*</span><span class="n">max_radius</span><span class="p">)</span> <span class="c1"># 5 pixeles de 30x30 resolucion.</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">buf_poly</span><span class="o">.</span><span class="n">total_bounds</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
356744.0 6291078.8 360563.9 6295050.4
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">buf_poly</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span> <span class="o">=</span> <span class="s2">&quot;4326&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">total_bounds</span>
<span class="n">display_map</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">),</span> <span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;

    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;

        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;

    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-1.12.4.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;

            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_422b09fb9d82cd8e170e21fa47c490f9 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;

&lt;/head&gt;
&lt;body&gt;


            &lt;div class=&quot;folium-map&quot; id=&quot;map_422b09fb9d82cd8e170e21fa47c490f9&quot; &gt;&lt;/div&gt;

&lt;/body&gt;
&lt;script&gt;


            var map_422b09fb9d82cd8e170e21fa47c490f9 = L.map(
                &quot;map_422b09fb9d82cd8e170e21fa47c490f9&quot;,
                {
                    center: [-33.49260191174738, -70.52154802563291],
                    crs: L.CRS.EPSG3857,
                    zoom: 14,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );





            var tile_layer_380afa9b4c649a623802c4d5a1c6e0c2 = L.tileLayer(
                &quot;http://mt1.google.com/vt/lyrs=y\u0026z={z}\u0026x={x}\u0026y={y}&quot;,
                {&quot;attribution&quot;: &quot;Google&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 18, &quot;maxZoom&quot;: 18, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            ).addTo(map_422b09fb9d82cd8e170e21fa47c490f9);


            var poly_line_e92dd5629815f1d4b0dca0b0cf128376 = L.polyline(
                [[-33.51052909812226, -70.54208995878555], [-33.51052909812226, -70.50100609248028], [-33.4746747253725, -70.50100609248028], [-33.4746747253725, -70.54208995878555], [-33.51052909812226, -70.54208995878555]],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;red&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: false, &quot;fillColor&quot;: &quot;red&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;noClip&quot;: false, &quot;opacity&quot;: 0.8, &quot;smoothFactor&quot;: 1.0, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(map_422b09fb9d82cd8e170e21fa47c490f9);


                var lat_lng_popup_ebc4b0d93b3e2c124e53edeeb37ac2d9 = L.popup();
                function latLngPop(e) {
                    lat_lng_popup_ebc4b0d93b3e2c124e53edeeb37ac2d9
                        .setLatLng(e.latlng)
                        .setContent(&quot;Latitude: &quot; + e.latlng.lat.toFixed(4) +
                                    &quot;&lt;br&gt;Longitude: &quot; + e.latlng.lng.toFixed(4))
                        .openOn(map_422b09fb9d82cd8e170e21fa47c490f9);
                    }
                map_422b09fb9d82cd8e170e21fa47c490f9.on(&#x27;click&#x27;, latLngPop);

&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div>
</div>
</section>
<hr class="docutils" />
<section id="Serie-de-tiempo-de-NDVI">
<h2>Serie de tiempo de NDVI<a class="headerlink" href="#Serie-de-tiempo-de-NDVI" title="Link to this heading">#</a></h2>
<p>Utilizando la extensión del polígono obtenemos la serie de tiempo de las bandas <code class="docutils literal notranslate"><span class="pre">red</span></code>, <code class="docutils literal notranslate"><span class="pre">nir08</span></code> y <code class="docutils literal notranslate"><span class="pre">qa_pixel</span></code>, en los productos Landsat 5, 7, 8 y 9.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dc</span> <span class="o">=</span> <span class="n">datacube</span><span class="o">.</span><span class="n">Datacube</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="s2">&quot;areas&quot;</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;product&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;landsat5_c2l2_sr&#39;</span><span class="p">,</span> <span class="s1">&#39;landsat7_c2l2_sr&#39;</span><span class="p">,</span> <span class="s2">&quot;landsat8_c2l2_sr&quot;</span><span class="p">,</span> <span class="s1">&#39;landsat9_c2l2_sr&#39;</span><span class="p">],</span>
         <span class="s2">&quot;measurements&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;nir08&#39;</span><span class="p">,</span> <span class="s1">&#39;qa_pixel&#39;</span><span class="p">],</span>
         <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">),</span>
         <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">),</span>
         <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;2010-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2024-01-07&quot;</span><span class="p">),</span>
         <span class="s2">&quot;output_crs&quot;</span><span class="p">:</span> <span class="s1">&#39;EPSG:32719&#39;</span><span class="p">,</span>
         <span class="s2">&quot;crs&quot;</span><span class="p">:</span> <span class="s1">&#39;EPSG:32719&#39;</span><span class="p">,</span>
         <span class="s2">&quot;resolution&quot;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span>
         <span class="s2">&quot;group_by&quot;</span><span class="p">:</span> <span class="s1">&#39;solar_day&#39;</span><span class="p">,</span>
         <span class="s2">&quot;dask_chunks&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">2048</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">2048</span><span class="p">},</span>
         <span class="s2">&quot;skip_broken_datasets&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="o">**</span><span class="n">query</span><span class="p">)</span>

<span class="c1"># Hacerlo antes de computar evita un costoso rechunk después</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">chunk</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">values</span><span class="p">)})</span>
</pre></div>
</div>
</div>
<p>Definimos la siguiente siguiente función <code class="docutils literal notranslate"><span class="pre">mask_and_compute</span></code> para filtrar nubes, escalar valores a reflectancia, y obtención de NDVI.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mask_and_compute</span><span class="p">(</span><span class="n">ds</span><span class="p">):</span>
    <span class="n">reflectance_bands</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;nir08&quot;</span><span class="p">]</span>
    <span class="n">quality_band</span> <span class="o">=</span> <span class="s1">&#39;qa_pixel&#39;</span>
    <span class="n">good_pixel_flags</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;snow&quot;</span><span class="p">:</span> <span class="s2">&quot;not_high_confidence&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cloud&quot;</span><span class="p">:</span> <span class="s2">&quot;not_high_confidence&quot;</span><span class="p">,</span>
        <span class="c1">#&quot;cirrus&quot;: &quot;not_high_confidence&quot;,</span>
        <span class="s2">&quot;cloud_shadow&quot;</span><span class="p">:</span> <span class="s2">&quot;not_high_confidence&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nodata&quot;</span><span class="p">:</span> <span class="kc">False</span>
    <span class="p">}</span>

    <span class="n">cloud_free_mask</span> <span class="o">=</span> <span class="n">masking</span><span class="o">.</span><span class="n">make_mask</span><span class="p">(</span><span class="n">ds</span><span class="p">[</span><span class="n">quality_band</span><span class="p">],</span> <span class="o">**</span><span class="n">good_pixel_flags</span><span class="p">)</span>
    <span class="n">masked</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">reflectance_bands</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">cloud_free_mask</span><span class="p">)</span>
    <span class="n">masked</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">masked</span><span class="o">*</span><span class="mf">0.0000275</span> <span class="o">+</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">ndvi</span> <span class="o">=</span> <span class="p">(</span><span class="n">masked</span><span class="o">.</span><span class="n">nir08</span> <span class="o">-</span> <span class="n">masked</span><span class="o">.</span><span class="n">red</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">masked</span><span class="o">.</span><span class="n">nir08</span>  <span class="o">+</span> <span class="n">masked</span><span class="o">.</span><span class="n">red</span> <span class="p">)</span>
    <span class="n">ndvi</span> <span class="o">=</span> <span class="n">ndvi</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">ndvi</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">ndvi</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">ndvi</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span>

    <span class="k">return</span> <span class="n">ndvi</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ndvi</span> <span class="o">=</span> <span class="n">mask_and_compute</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">buf_poly</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">buf_poly</span><span class="o">.</span><span class="n">crs</span><span class="p">))</span><span class="o">.</span><span class="n">persist</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Observamos que el <code class="docutils literal notranslate"><span class="pre">ndvi</span></code> tiene 3 dimensiones, <code class="docutils literal notranslate"><span class="pre">time</span></code> con más de 560 valores <code class="docutils literal notranslate"><span class="pre">y</span></code> con 132 valores, y<code class="docutils literal notranslate"><span class="pre">x</span></code> con 128 valores.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ndvi</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (time: 561, y: 132, x: 128)&gt;
dask.array&lt;where, shape=(561, 132, 128), dtype=float32, chunksize=(561, 50, 50), chunktype=numpy.ndarray&gt;
Coordinates:
  * time         (time) datetime64[ns] 2010-01-06T14:25:03.486099 ... 2023-12...
  * y            (y) float64 6.295e+06 6.295e+06 ... 6.291e+06 6.291e+06
  * x            (x) float64 3.567e+05 3.568e+05 ... 3.605e+05 3.606e+05
    spatial_ref  int64 0
Attributes:
    crs:           EPSG:32719
    grid_mapping:  spatial_ref</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 561</li><li><span class='xr-has-index'>y</span>: 132</li><li><span class='xr-has-index'>x</span>: 128</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-ddfda982-25ad-480e-850c-7bf63d1d0269' class='xr-array-in' type='checkbox' checked><label for='section-ddfda982-25ad-480e-850c-7bf63d1d0269' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(561, 49, 50), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 36.16 MiB </td>
                        <td> 5.35 MiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (561, 132, 128) </td>
                        <td> (561, 50, 50) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 1 graph layer </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float32 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="173" height="163" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="15" x2="80" y2="86" />
  <line x1="10" y1="32" x2="80" y2="102" />
  <line x1="10" y1="42" x2="80" y2="113" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="42" style="stroke-width:2" />
  <line x1="80" y1="70" x2="80" y2="113" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 80.58823529411765,70.58823529411765 80.58823529411765,113.25626405433039 10.0,42.668028760212735" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="52" y2="0" style="stroke-width:2" />
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="26" y1="0" x2="97" y2="70" />
  <line x1="43" y1="0" x2="113" y2="70" />
  <line x1="52" y1="0" x2="123" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 52.54783080601505,0.0 123.1360661001327,70.58823529411765 80.58823529411765,70.58823529411765" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="123" y2="70" style="stroke-width:2" />
  <line x1="80" y1="86" x2="123" y2="86" />
  <line x1="80" y1="102" x2="123" y2="102" />
  <line x1="80" y1="113" x2="123" y2="113" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="113" style="stroke-width:2" />
  <line x1="97" y1="70" x2="97" y2="113" />
  <line x1="113" y1="70" x2="113" y2="113" />
  <line x1="123" y1="70" x2="123" y2="113" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.58823529411765,70.58823529411765 123.1360661001327,70.58823529411765 123.1360661001327,113.25626405433039 80.58823529411765,113.25626405433039" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="101.862151" y="133.256264" font-size="1.0rem" font-weight="100" text-anchor="middle" >128</text>
  <text x="143.136066" y="91.922250" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,143.136066,91.922250)">132</text>
  <text x="35.294118" y="97.962146" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,97.962146)">561</text>
</svg>
        </td>
    </tr>
</table></div></div></li><li class='xr-section-item'><input id='section-9630f98c-3064-4509-9751-58c0340157a4' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9630f98c-3064-4509-9751-58c0340157a4' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2010-01-06T14:25:03.486099 ... 2...</div><input id='attrs-6cf0420c-84b1-47ee-83a8-41527678ff80' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6cf0420c-84b1-47ee-83a8-41527678ff80' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b87a28c4-ba21-466e-b601-d1507182dca7' class='xr-var-data-in' type='checkbox'><label for='data-b87a28c4-ba21-466e-b601-d1507182dca7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>seconds since 1970-01-01 00:00:00</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2010-01-06T14:25:03.486099000&#x27;, &#x27;2010-01-14T14:24:28.097025000&#x27;,
       &#x27;2010-01-22T14:25:17.853047000&#x27;, ..., &#x27;2023-12-04T14:33:48.532362000&#x27;,
       &#x27;2023-12-12T14:33:57.581636000&#x27;, &#x27;2023-12-28T14:34:00.071911000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>6.295e+06 6.295e+06 ... 6.291e+06</div><input id='attrs-79fb6c01-fcce-4744-8125-8eb527fff531' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-79fb6c01-fcce-4744-8125-8eb527fff531' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-02326e47-4039-43e0-9b01-98211f4beb4e' class='xr-var-data-in' type='checkbox'><label for='data-02326e47-4039-43e0-9b01-98211f4beb4e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>metre</dd><dt><span>resolution :</span></dt><dd>-30.0</dd><dt><span>crs :</span></dt><dd>EPSG:32719</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>long_name :</span></dt><dd>y coordinate of projection</dd><dt><span>standard_name :</span></dt><dd>projection_y_coordinate</dd></dl></div><div class='xr-var-data'><pre>array([6295035., 6295005., 6294975., 6294945., 6294915., 6294885., 6294855.,
       6294825., 6294795., 6294765., 6294735., 6294705., 6294675., 6294645.,
       6294615., 6294585., 6294555., 6294525., 6294495., 6294465., 6294435.,
       6294405., 6294375., 6294345., 6294315., 6294285., 6294255., 6294225.,
       6294195., 6294165., 6294135., 6294105., 6294075., 6294045., 6294015.,
       6293985., 6293955., 6293925., 6293895., 6293865., 6293835., 6293805.,
       6293775., 6293745., 6293715., 6293685., 6293655., 6293625., 6293595.,
       6293565., 6293535., 6293505., 6293475., 6293445., 6293415., 6293385.,
       6293355., 6293325., 6293295., 6293265., 6293235., 6293205., 6293175.,
       6293145., 6293115., 6293085., 6293055., 6293025., 6292995., 6292965.,
       6292935., 6292905., 6292875., 6292845., 6292815., 6292785., 6292755.,
       6292725., 6292695., 6292665., 6292635., 6292605., 6292575., 6292545.,
       6292515., 6292485., 6292455., 6292425., 6292395., 6292365., 6292335.,
       6292305., 6292275., 6292245., 6292215., 6292185., 6292155., 6292125.,
       6292095., 6292065., 6292035., 6292005., 6291975., 6291945., 6291915.,
       6291885., 6291855., 6291825., 6291795., 6291765., 6291735., 6291705.,
       6291675., 6291645., 6291615., 6291585., 6291555., 6291525., 6291495.,
       6291465., 6291435., 6291405., 6291375., 6291345., 6291315., 6291285.,
       6291255., 6291225., 6291195., 6291165., 6291135., 6291105.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.567e+05 3.568e+05 ... 3.606e+05</div><input id='attrs-97d5cad5-7b3a-4cdf-a3f6-afcd81bb7469' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-97d5cad5-7b3a-4cdf-a3f6-afcd81bb7469' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-335e81c1-45cc-4783-a668-bfcb16a14b3c' class='xr-var-data-in' type='checkbox'><label for='data-335e81c1-45cc-4783-a668-bfcb16a14b3c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>metre</dd><dt><span>resolution :</span></dt><dd>30.0</dd><dt><span>crs :</span></dt><dd>EPSG:32719</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>long_name :</span></dt><dd>x coordinate of projection</dd><dt><span>standard_name :</span></dt><dd>projection_x_coordinate</dd></dl></div><div class='xr-var-data'><pre>array([356745., 356775., 356805., 356835., 356865., 356895., 356925., 356955.,
       356985., 357015., 357045., 357075., 357105., 357135., 357165., 357195.,
       357225., 357255., 357285., 357315., 357345., 357375., 357405., 357435.,
       357465., 357495., 357525., 357555., 357585., 357615., 357645., 357675.,
       357705., 357735., 357765., 357795., 357825., 357855., 357885., 357915.,
       357945., 357975., 358005., 358035., 358065., 358095., 358125., 358155.,
       358185., 358215., 358245., 358275., 358305., 358335., 358365., 358395.,
       358425., 358455., 358485., 358515., 358545., 358575., 358605., 358635.,
       358665., 358695., 358725., 358755., 358785., 358815., 358845., 358875.,
       358905., 358935., 358965., 358995., 359025., 359055., 359085., 359115.,
       359145., 359175., 359205., 359235., 359265., 359295., 359325., 359355.,
       359385., 359415., 359445., 359475., 359505., 359535., 359565., 359595.,
       359625., 359655., 359685., 359715., 359745., 359775., 359805., 359835.,
       359865., 359895., 359925., 359955., 359985., 360015., 360045., 360075.,
       360105., 360135., 360165., 360195., 360225., 360255., 360285., 360315.,
       360345., 360375., 360405., 360435., 360465., 360495., 360525., 360555.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-205bd1ca-091e-4bce-999a-972a989ec51f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-205bd1ca-091e-4bce-999a-972a989ec51f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ada6e247-9157-4422-8076-c4166f4e08b8' class='xr-var-data-in' type='checkbox'><label for='data-ada6e247-9157-4422-8076-c4166f4e08b8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 19S&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-69],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,10000000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32719&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>horizontal_datum_name :</span></dt><dd>World Geodetic System 1984</dd><dt><span>projected_crs_name :</span></dt><dd>WGS 84 / UTM zone 19S</dd><dt><span>grid_mapping_name :</span></dt><dd>transverse_mercator</dd><dt><span>latitude_of_projection_origin :</span></dt><dd>0.0</dd><dt><span>longitude_of_central_meridian :</span></dt><dd>-69.0</dd><dt><span>false_easting :</span></dt><dd>500000.0</dd><dt><span>false_northing :</span></dt><dd>10000000.0</dd><dt><span>scale_factor_at_central_meridian :</span></dt><dd>0.9996</dd><dt><span>spatial_ref :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 19S&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-69],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,10000000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32719&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>356730.0 30.0 0.0 6295050.0 0.0 -30.0</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-db884b39-e520-4adc-94d2-2c83aaa62eb3' class='xr-section-summary-in' type='checkbox'  ><label for='section-db884b39-e520-4adc-94d2-2c83aaa62eb3' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-8f6bda10-2f3e-4853-b144-6da334ebb49c' class='xr-index-data-in' type='checkbox'/><label for='index-8f6bda10-2f3e-4853-b144-6da334ebb49c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;2010-01-06 14:25:03.486099&#x27;, &#x27;2010-01-14 14:24:28.097025&#x27;,
               &#x27;2010-01-22 14:25:17.853047&#x27;, &#x27;2010-01-30 14:24:31.984000&#x27;,
               &#x27;2010-02-07 14:25:30.143176&#x27;, &#x27;2010-02-15 14:24:35.281050&#x27;,
               &#x27;2010-02-23 14:25:39.989559&#x27;, &#x27;2010-03-11 14:25:47.166997&#x27;,
               &#x27;2010-03-19 14:24:37.928019&#x27;, &#x27;2010-03-27 14:25:51.759185&#x27;,
               ...
               &#x27;2023-10-01 14:33:48.126171&#x27;, &#x27;2023-10-09 14:33:49.638217&#x27;,
               &#x27;2023-10-25 14:33:54.261435&#x27;, &#x27;2023-11-02 14:33:53.253387&#x27;,
               &#x27;2023-11-10 14:33:51.340268&#x27;, &#x27;2023-11-18 14:33:54.054821&#x27;,
               &#x27;2023-11-26 14:33:59.213601&#x27;, &#x27;2023-12-04 14:33:48.532362&#x27;,
               &#x27;2023-12-12 14:33:57.581636&#x27;, &#x27;2023-12-28 14:34:00.071911&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=561, freq=None))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-5afcbf7e-c286-4ba8-93f3-04ea8da96ec9' class='xr-index-data-in' type='checkbox'/><label for='index-5afcbf7e-c286-4ba8-93f3-04ea8da96ec9' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([6295035.0, 6295005.0, 6294975.0, 6294945.0, 6294915.0, 6294885.0,
       6294855.0, 6294825.0, 6294795.0, 6294765.0,
       ...
       6291375.0, 6291345.0, 6291315.0, 6291285.0, 6291255.0, 6291225.0,
       6291195.0, 6291165.0, 6291135.0, 6291105.0],
      dtype=&#x27;float64&#x27;, name=&#x27;y&#x27;, length=132))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-f74fb841-436a-4c46-86ed-d10438c3d4f6' class='xr-index-data-in' type='checkbox'/><label for='index-f74fb841-436a-4c46-86ed-d10438c3d4f6' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([356745.0, 356775.0, 356805.0, 356835.0, 356865.0, 356895.0, 356925.0,
       356955.0, 356985.0, 357015.0,
       ...
       360285.0, 360315.0, 360345.0, 360375.0, 360405.0, 360435.0, 360465.0,
       360495.0, 360525.0, 360555.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=128))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-78d8dad7-64e4-478e-81f1-88e9dee8fec6' class='xr-section-summary-in' type='checkbox'  checked><label for='section-78d8dad7-64e4-478e-81f1-88e9dee8fec6' class='xr-section-summary' >Attributes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>crs :</span></dt><dd>EPSG:32719</dd><dt><span>grid_mapping :</span></dt><dd>spatial_ref</dd></dl></div></li></ul></div></div></div>
</div>
<p>También observamos que <code class="docutils literal notranslate"><span class="pre">ndvi</span></code> fue “cortado” al buffer asociado al polígono de interés.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ndvi</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/env/lib/python3.10/site-packages/rasterio/warp.py:344: NotGeoreferencedWarning: Dataset has no geotransform, gcps, or rpcs. The identity matrix will be returned.
  _reproject(
/env/lib/python3.10/site-packages/rasterio/warp.py:344: NotGeoreferencedWarning: Dataset has no geotransform, gcps, or rpcs. The identity matrix will be returned.
  _reproject(
/env/lib/python3.10/site-packages/rasterio/warp.py:344: NotGeoreferencedWarning: Dataset has no geotransform, gcps, or rpcs. The identity matrix will be returned.
  _reproject(
/env/lib/python3.10/site-packages/rasterio/warp.py:344: NotGeoreferencedWarning: Dataset has no geotransform, gcps, or rpcs. The identity matrix will be returned.
  _reproject(
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa88a008940&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_22_2.png" src="../../_images/_static_notebooks_01_SAMSARA_app_22_2.png" />
</div>
</div>
</section>
<hr class="docutils" />
<section id="PELT---Detección-de-cambios-a-nivel-de-píxeles">
<h2>PELT - Detección de cambios a nivel de píxeles<a class="headerlink" href="#PELT---Detección-de-cambios-a-nivel-de-píxeles" title="Link to this heading">#</a></h2>
<p>En esta sección utilizaremos una implementación del algoritmo “Linearly penalized segmentation” del paquete <a class="reference external" href="https://centre-borelli.github.io/ruptures-docs/">rupture</a>. Esta implementación detecta los cambios píxel a píxel en un objeto xarray.DataArray.</p>
<p>Para cargar las funciones requeridas debemos ejecutar la siguiente celda:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">samsara.pelt</span> <span class="k">as</span> <span class="nn">spelt</span>
</pre></div>
</div>
</div>
<p>Los parámetros que utilizaremos en PELT son: * min_size: 3 - Implica que deben existir al menos 3 elementos (<code class="docutils literal notranslate"><span class="pre">time</span></code>) entre un <code class="docutils literal notranslate"><span class="pre">bkp</span></code> y otro. * jump: 1 - Es la única opción para el modelo “rbf”</p>
<p>Otros parámetros que utilizaremos son: * n_breaks: 5 - Definimos un máximo de 5 <code class="docutils literal notranslate"><span class="pre">bkp</span></code>s, * start_date: “2016-01-01” - Solo se guardan los <code class="docutils literal notranslate"><span class="pre">bkp</span></code>s que ocurran desde “2016-01-01” en adelante (pero se usa la serie completa para entrenar PELT)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># rupture parameters</span>
<span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;rbf&quot;</span>
<span class="n">min_size</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">jump</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">penalty</span> <span class="o">=</span> <span class="mi">30</span>

<span class="c1"># samsara parameters</span>
<span class="n">n_breaks</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s2">&quot;2016-01-01&quot;</span>
</pre></div>
</div>
</div>
<p>Para ejecutar PELT utilizamos la siguiente celda</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fpelt</span> <span class="o">=</span> <span class="n">spelt</span><span class="o">.</span><span class="n">pelt</span><span class="p">(</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">ndvi</span><span class="p">,</span>
    <span class="n">n_breaks</span><span class="o">=</span><span class="n">n_breaks</span><span class="p">,</span>
    <span class="n">penalty</span><span class="o">=</span><span class="n">penalty</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">min_size</span><span class="o">=</span><span class="n">min_size</span><span class="p">,</span>
    <span class="n">jump</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">backend</span> <span class="o">=</span> <span class="s1">&#39;xarray&#39;</span><span class="p">)</span> <span class="c1">#TODO: test with &#39;dask&#39;</span>
</pre></div>
</div>
</div>
<p>La ejecución anterior genera el objeto <code class="docutils literal notranslate"><span class="pre">fpelt</span></code> como <code class="docutils literal notranslate"><span class="pre">future</span></code>, es decir, aún no se ha ejecutado, pero nos da una idea de cómo es su estructura:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fpelt</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:      (y: 132, x: 128, bkp: 5)
Coordinates:
  * y            (y) float64 6.295e+06 6.295e+06 ... 6.291e+06 6.291e+06
  * x            (x) float64 3.567e+05 3.568e+05 ... 3.605e+05 3.606e+05
    spatial_ref  int64 0
  * bkp          (bkp) int64 0 1 2 3 4
Data variables:
    magnitude    (y, x, bkp) float64 dask.array&lt;chunksize=(49, 50, 5), meta=np.ndarray&gt;
    date         (y, x, bkp) float64 dask.array&lt;chunksize=(49, 50, 5), meta=np.ndarray&gt;
Attributes:
    crs:           EPSG:32719
    grid_mapping:  spatial_ref</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-0ae168f9-ce51-4375-aa77-42ea4e9bbf7d' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-0ae168f9-ce51-4375-aa77-42ea4e9bbf7d' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>y</span>: 132</li><li><span class='xr-has-index'>x</span>: 128</li><li><span class='xr-has-index'>bkp</span>: 5</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-9e19bf62-f37c-446f-a36c-4a6275e1f092' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9e19bf62-f37c-446f-a36c-4a6275e1f092' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>6.295e+06 6.295e+06 ... 6.291e+06</div><input id='attrs-45ef99df-7145-4749-90ef-8db4c6ec3921' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-45ef99df-7145-4749-90ef-8db4c6ec3921' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-117e5569-c91d-4525-9a3b-ea6e3cc070a5' class='xr-var-data-in' type='checkbox'><label for='data-117e5569-c91d-4525-9a3b-ea6e3cc070a5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>metre</dd><dt><span>resolution :</span></dt><dd>-30.0</dd><dt><span>crs :</span></dt><dd>EPSG:32719</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>long_name :</span></dt><dd>y coordinate of projection</dd><dt><span>standard_name :</span></dt><dd>projection_y_coordinate</dd></dl></div><div class='xr-var-data'><pre>array([6295035., 6295005., 6294975., 6294945., 6294915., 6294885., 6294855.,
       6294825., 6294795., 6294765., 6294735., 6294705., 6294675., 6294645.,
       6294615., 6294585., 6294555., 6294525., 6294495., 6294465., 6294435.,
       6294405., 6294375., 6294345., 6294315., 6294285., 6294255., 6294225.,
       6294195., 6294165., 6294135., 6294105., 6294075., 6294045., 6294015.,
       6293985., 6293955., 6293925., 6293895., 6293865., 6293835., 6293805.,
       6293775., 6293745., 6293715., 6293685., 6293655., 6293625., 6293595.,
       6293565., 6293535., 6293505., 6293475., 6293445., 6293415., 6293385.,
       6293355., 6293325., 6293295., 6293265., 6293235., 6293205., 6293175.,
       6293145., 6293115., 6293085., 6293055., 6293025., 6292995., 6292965.,
       6292935., 6292905., 6292875., 6292845., 6292815., 6292785., 6292755.,
       6292725., 6292695., 6292665., 6292635., 6292605., 6292575., 6292545.,
       6292515., 6292485., 6292455., 6292425., 6292395., 6292365., 6292335.,
       6292305., 6292275., 6292245., 6292215., 6292185., 6292155., 6292125.,
       6292095., 6292065., 6292035., 6292005., 6291975., 6291945., 6291915.,
       6291885., 6291855., 6291825., 6291795., 6291765., 6291735., 6291705.,
       6291675., 6291645., 6291615., 6291585., 6291555., 6291525., 6291495.,
       6291465., 6291435., 6291405., 6291375., 6291345., 6291315., 6291285.,
       6291255., 6291225., 6291195., 6291165., 6291135., 6291105.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.567e+05 3.568e+05 ... 3.606e+05</div><input id='attrs-04cbed71-b9e3-44af-8381-1ad7a8d88a2f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-04cbed71-b9e3-44af-8381-1ad7a8d88a2f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-30c0d717-1ddc-4fa4-9db1-86aa63c95260' class='xr-var-data-in' type='checkbox'><label for='data-30c0d717-1ddc-4fa4-9db1-86aa63c95260' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>metre</dd><dt><span>resolution :</span></dt><dd>30.0</dd><dt><span>crs :</span></dt><dd>EPSG:32719</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>long_name :</span></dt><dd>x coordinate of projection</dd><dt><span>standard_name :</span></dt><dd>projection_x_coordinate</dd></dl></div><div class='xr-var-data'><pre>array([356745., 356775., 356805., 356835., 356865., 356895., 356925., 356955.,
       356985., 357015., 357045., 357075., 357105., 357135., 357165., 357195.,
       357225., 357255., 357285., 357315., 357345., 357375., 357405., 357435.,
       357465., 357495., 357525., 357555., 357585., 357615., 357645., 357675.,
       357705., 357735., 357765., 357795., 357825., 357855., 357885., 357915.,
       357945., 357975., 358005., 358035., 358065., 358095., 358125., 358155.,
       358185., 358215., 358245., 358275., 358305., 358335., 358365., 358395.,
       358425., 358455., 358485., 358515., 358545., 358575., 358605., 358635.,
       358665., 358695., 358725., 358755., 358785., 358815., 358845., 358875.,
       358905., 358935., 358965., 358995., 359025., 359055., 359085., 359115.,
       359145., 359175., 359205., 359235., 359265., 359295., 359325., 359355.,
       359385., 359415., 359445., 359475., 359505., 359535., 359565., 359595.,
       359625., 359655., 359685., 359715., 359745., 359775., 359805., 359835.,
       359865., 359895., 359925., 359955., 359985., 360015., 360045., 360075.,
       360105., 360135., 360165., 360195., 360225., 360255., 360285., 360315.,
       360345., 360375., 360405., 360435., 360465., 360495., 360525., 360555.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-156fd986-9734-4147-b1d3-0dc21bb2bd2a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-156fd986-9734-4147-b1d3-0dc21bb2bd2a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a78c7933-b5f7-4809-b985-447edba313d8' class='xr-var-data-in' type='checkbox'><label for='data-a78c7933-b5f7-4809-b985-447edba313d8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 19S&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-69],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,10000000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32719&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>horizontal_datum_name :</span></dt><dd>World Geodetic System 1984</dd><dt><span>projected_crs_name :</span></dt><dd>WGS 84 / UTM zone 19S</dd><dt><span>grid_mapping_name :</span></dt><dd>transverse_mercator</dd><dt><span>latitude_of_projection_origin :</span></dt><dd>0.0</dd><dt><span>longitude_of_central_meridian :</span></dt><dd>-69.0</dd><dt><span>false_easting :</span></dt><dd>500000.0</dd><dt><span>false_northing :</span></dt><dd>10000000.0</dd><dt><span>scale_factor_at_central_meridian :</span></dt><dd>0.9996</dd><dt><span>spatial_ref :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 19S&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-69],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,10000000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32719&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>356730.0 30.0 0.0 6295050.0 0.0 -30.0</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>bkp</span></div><div class='xr-var-dims'>(bkp)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 1 2 3 4</div><input id='attrs-7100cbe2-09b2-4728-bd60-5c3f55961635' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7100cbe2-09b2-4728-bd60-5c3f55961635' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b857fb68-947d-4daf-8fc6-ce3f970dda79' class='xr-var-data-in' type='checkbox'><label for='data-b857fb68-947d-4daf-8fc6-ce3f970dda79' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0, 1, 2, 3, 4])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-7e918df2-91fe-45e4-83ae-58432320bfa0' class='xr-section-summary-in' type='checkbox'  checked><label for='section-7e918df2-91fe-45e4-83ae-58432320bfa0' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>magnitude</span></div><div class='xr-var-dims'>(y, x, bkp)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(49, 50, 5), meta=np.ndarray&gt;</div><input id='attrs-df9ce3a4-c3c4-4a33-8eee-2f9dd326ecc7' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-df9ce3a4-c3c4-4a33-8eee-2f9dd326ecc7' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b6ae93b7-8323-4fdc-93bf-cab6c4eaa328' class='xr-var-data-in' type='checkbox'><label for='data-b6ae93b7-8323-4fdc-93bf-cab6c4eaa328' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 660.00 kiB </td>
                        <td> 97.66 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (132, 128, 5) </td>
                        <td> (50, 50, 5) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 5 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="163" height="236" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="45" x2="80" y2="116" />
  <line x1="10" y1="90" x2="80" y2="161" />
  <line x1="10" y1="116" x2="80" y2="186" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="116" style="stroke-width:2" />
  <line x1="36" y1="26" x2="36" y2="142" />
  <line x1="62" y1="52" x2="62" y2="169" />
  <line x1="80" y1="70" x2="80" y2="186" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 80.58823529411765,70.58823529411765 80.58823529411765,186.951871657754 10.0,116.36363636363636" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="42" y2="0" style="stroke-width:2" />
  <line x1="36" y1="26" x2="69" y2="26" />
  <line x1="62" y1="52" x2="95" y2="52" />
  <line x1="80" y1="70" x2="113" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="42" y1="0" x2="113" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 42.8010430487216,0.0 113.38927834283925,70.58823529411765 80.58823529411765,70.58823529411765" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="113" y2="70" style="stroke-width:2" />
  <line x1="80" y1="116" x2="113" y2="116" />
  <line x1="80" y1="161" x2="113" y2="161" />
  <line x1="80" y1="186" x2="113" y2="186" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="186" style="stroke-width:2" />
  <line x1="113" y1="70" x2="113" y2="186" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.58823529411765,70.58823529411765 113.38927834283925,70.58823529411765 113.38927834283925,186.951871657754 80.58823529411765,186.951871657754" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="96.988757" y="206.951872" font-size="1.0rem" font-weight="100" text-anchor="middle" >5</text>
  <text x="133.389278" y="128.770053" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,133.389278,128.770053)">128</text>
  <text x="35.294118" y="171.657754" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,171.657754)">132</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>date</span></div><div class='xr-var-dims'>(y, x, bkp)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(49, 50, 5), meta=np.ndarray&gt;</div><input id='attrs-0b50882b-dc0f-4e93-9f19-4a633959b65a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0b50882b-dc0f-4e93-9f19-4a633959b65a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-29e3eabc-e36c-4086-a344-c349487955c0' class='xr-var-data-in' type='checkbox'><label for='data-29e3eabc-e36c-4086-a344-c349487955c0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 660.00 kiB </td>
                        <td> 97.66 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (132, 128, 5) </td>
                        <td> (50, 50, 5) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 9 chunks in 5 graph layers </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="163" height="236" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="45" x2="80" y2="116" />
  <line x1="10" y1="90" x2="80" y2="161" />
  <line x1="10" y1="116" x2="80" y2="186" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="116" style="stroke-width:2" />
  <line x1="36" y1="26" x2="36" y2="142" />
  <line x1="62" y1="52" x2="62" y2="169" />
  <line x1="80" y1="70" x2="80" y2="186" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 80.58823529411765,70.58823529411765 80.58823529411765,186.951871657754 10.0,116.36363636363636" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="42" y2="0" style="stroke-width:2" />
  <line x1="36" y1="26" x2="69" y2="26" />
  <line x1="62" y1="52" x2="95" y2="52" />
  <line x1="80" y1="70" x2="113" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="42" y1="0" x2="113" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.0,0.0 42.8010430487216,0.0 113.38927834283925,70.58823529411765 80.58823529411765,70.58823529411765" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="113" y2="70" style="stroke-width:2" />
  <line x1="80" y1="116" x2="113" y2="116" />
  <line x1="80" y1="161" x2="113" y2="161" />
  <line x1="80" y1="186" x2="113" y2="186" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="186" style="stroke-width:2" />
  <line x1="113" y1="70" x2="113" y2="186" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.58823529411765,70.58823529411765 113.38927834283925,70.58823529411765 113.38927834283925,186.951871657754 80.58823529411765,186.951871657754" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="96.988757" y="206.951872" font-size="1.0rem" font-weight="100" text-anchor="middle" >5</text>
  <text x="133.389278" y="128.770053" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,133.389278,128.770053)">128</text>
  <text x="35.294118" y="171.657754" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,171.657754)">132</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-7f4f07d5-1b15-4f18-bab8-02d993dcd9a6' class='xr-section-summary-in' type='checkbox'  ><label for='section-7f4f07d5-1b15-4f18-bab8-02d993dcd9a6' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-e08a7885-7652-4840-9dfc-1c953307057f' class='xr-index-data-in' type='checkbox'/><label for='index-e08a7885-7652-4840-9dfc-1c953307057f' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([6295035.0, 6295005.0, 6294975.0, 6294945.0, 6294915.0, 6294885.0,
       6294855.0, 6294825.0, 6294795.0, 6294765.0,
       ...
       6291375.0, 6291345.0, 6291315.0, 6291285.0, 6291255.0, 6291225.0,
       6291195.0, 6291165.0, 6291135.0, 6291105.0],
      dtype=&#x27;float64&#x27;, name=&#x27;y&#x27;, length=132))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-f60e81b5-d4a6-492f-b3eb-f0ed2011007f' class='xr-index-data-in' type='checkbox'/><label for='index-f60e81b5-d4a6-492f-b3eb-f0ed2011007f' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([356745.0, 356775.0, 356805.0, 356835.0, 356865.0, 356895.0, 356925.0,
       356955.0, 356985.0, 357015.0,
       ...
       360285.0, 360315.0, 360345.0, 360375.0, 360405.0, 360435.0, 360465.0,
       360495.0, 360525.0, 360555.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=128))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>bkp</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-1377b321-913c-4d70-8637-87a796abbe83' class='xr-index-data-in' type='checkbox'/><label for='index-1377b321-913c-4d70-8637-87a796abbe83' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([0, 1, 2, 3, 4], dtype=&#x27;int64&#x27;, name=&#x27;bkp&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-aff0146b-9f14-493b-8aee-46ebe5cd0b70' class='xr-section-summary-in' type='checkbox'  checked><label for='section-aff0146b-9f14-493b-8aee-46ebe5cd0b70' class='xr-section-summary' >Attributes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>crs :</span></dt><dd>EPSG:32719</dd><dt><span>grid_mapping :</span></dt><dd>spatial_ref</dd></dl></div></li></ul></div></div></div>
</div>
<ul class="simple">
<li><p>El objeto de salida es un <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> con 2 variables <code class="docutils literal notranslate"><span class="pre">magnitude</span></code> y <code class="docutils literal notranslate"><span class="pre">date</span></code>.</p>
<ul>
<li><p>La variable <code class="docutils literal notranslate"><span class="pre">magnitude</span></code> corresponde al delta de <code class="docutils literal notranslate"><span class="pre">ndvi</span></code> después vs antes del <code class="docutils literal notranslate"><span class="pre">bkp</span></code>.</p></li>
<li><p>La variable <code class="docutils literal notranslate"><span class="pre">date</span></code> corresponde a la fecha en la cual ocurre el <code class="docutils literal notranslate"><span class="pre">bkp</span></code> (<code class="docutils literal notranslate"><span class="pre">datetime64[s]</span></code> guardado como <code class="docutils literal notranslate"><span class="pre">float64</span></code>).</p></li>
</ul>
</li>
<li><p>Tiene 3 dimensiones <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span></code>, y <code class="docutils literal notranslate"><span class="pre">bkp</span></code>.</p>
<ul>
<li><p>Las dimensiones <code class="docutils literal notranslate"><span class="pre">y</span></code> y <code class="docutils literal notranslate"><span class="pre">x</span></code> corresponden a las mismas dimensiones <code class="docutils literal notranslate"><span class="pre">y</span></code> y <code class="docutils literal notranslate"><span class="pre">x</span></code> del objeto de entrada <code class="docutils literal notranslate"><span class="pre">ndvi</span></code>.</p></li>
<li><p>La dimensión <code class="docutils literal notranslate"><span class="pre">bkp</span></code> tiene 5 elementos, debido al argumento <code class="docutils literal notranslate"><span class="pre">n_breaks</span></code>.</p></li>
</ul>
</li>
</ul>
<p>Para ejecutar el objeto <code class="docutils literal notranslate"><span class="pre">fpelt</span></code> y guardar sus resultados en memoria debemos correr la siguiente línea, donde <code class="docutils literal notranslate"><span class="pre">%time</span></code> se agrega para conocer el tiempo que demora la ejecución.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">time</span> pelt_output = fpelt.compute()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CPU times: user 1.14 s, sys: 183 ms, total: 1.32 s
Wall time: 27.6 s
</pre></div></div>
</div>
<p>Podemos graficar los resultados de <code class="docutils literal notranslate"><span class="pre">pelt_output</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pelt_output</span><span class="o">.</span><span class="n">magnitude</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">bkp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa88170bac0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_34_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_34_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pelt_output</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">bkp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa88129e350&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_35_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_35_1.png" />
</div>
</div>
<p>No parece muy fácil de interpretar el gráfico anterior debido al rango de valores de <code class="docutils literal notranslate"><span class="pre">date</span></code>. Para corregir esto debemos utilizar la función <code class="docutils literal notranslate"><span class="pre">spelt.datetime_to_year_fraction</span></code> como en la siguiente celda</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Obtener dates in year.decimals</span>
<span class="n">pelt_output</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">spelt</span><span class="o">.</span><span class="n">datetime_to_year_fraction</span><span class="p">(</span><span class="n">pelt_output</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64[s]&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pelt_output</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">bkp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa8811af490&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_38_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_38_1.png" />
</div>
</div>
</section>
<hr class="docutils" />
<section id="Neighborhood-statistics---Estadísticas-de-vecindario">
<h2>Neighborhood statistics - Estadísticas de vecindario<a class="headerlink" href="#Neighborhood-statistics---Estadísticas-de-vecindario" title="Link to this heading">#</a></h2>
<p>Las estadísticas de vecindario corresponde a la ejecución de un filtro (convolución), en la cual se recorre una imagen píxel a píxel, se extrae un kernel o vecindario, se computan ciertas funciones y se asigna el resultado al píxel central del kernel.</p>
<p>En esta sección obtendremos dos estadísticas de vecindario, la desviación estándar de las fechas y el conteo de píxeles con fechas. Esto con un kernel cuadrado de radio 50.</p>
<p>Para cargar las funciones requeridas debemos ejecutar la siguiente celda:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">samsara.filter</span> <span class="k">as</span> <span class="nn">sfilter</span>
<span class="kn">import</span> <span class="nn">samsara.stats.neighborhood</span> <span class="k">as</span> <span class="nn">sns</span>
</pre></div>
</div>
</div>
<p>Debido a la naturaleza del proyecto, interesan los píxeles con deltas de <code class="docutils literal notranslate"><span class="pre">ndvi</span></code> negativos. Asimismo, interesan los píxeles con el último delta <code class="docutils literal notranslate"><span class="pre">ndvi</span></code> negativo detectado por PELT.</p>
<p>Ejecutaremos la siguiente celda para obtener el último delta de <code class="docutils literal notranslate"><span class="pre">ndvi</span></code> negativo y su fecha:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pelt_filtered</span> <span class="o">=</span> <span class="n">sfilter</span><span class="o">.</span><span class="n">filter_by_variable</span><span class="p">(</span><span class="n">pelt_output</span><span class="p">,</span> <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;last_negative&#39;</span><span class="p">,</span> <span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;magnitude&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">chunk</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span><span class="mi">75</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span><span class="mi">75</span><span class="p">})</span>
<span class="n">pelt_filtered</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:      (y: 132, x: 128)
Coordinates:
  * y            (y) float64 6.295e+06 6.295e+06 ... 6.291e+06 6.291e+06
  * x            (x) float64 3.567e+05 3.568e+05 ... 3.605e+05 3.606e+05
    spatial_ref  int64 0
Data variables:
    magnitude    (y, x) float64 dask.array&lt;chunksize=(75, 75), meta=np.ndarray&gt;
    date         (y, x) float64 dask.array&lt;chunksize=(75, 75), meta=np.ndarray&gt;
Attributes:
    crs:           EPSG:32719
    grid_mapping:  spatial_ref</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-e070b847-ff42-4e5c-ac54-8ed288c5669f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-e070b847-ff42-4e5c-ac54-8ed288c5669f' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>y</span>: 132</li><li><span class='xr-has-index'>x</span>: 128</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-580039b8-dc48-4848-a3fd-6e7096474047' class='xr-section-summary-in' type='checkbox'  checked><label for='section-580039b8-dc48-4848-a3fd-6e7096474047' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>6.295e+06 6.295e+06 ... 6.291e+06</div><input id='attrs-01832373-3291-4062-80db-a4b01080884c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-01832373-3291-4062-80db-a4b01080884c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d9327432-a4cf-4dbd-b751-26f10e347486' class='xr-var-data-in' type='checkbox'><label for='data-d9327432-a4cf-4dbd-b751-26f10e347486' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([6295035., 6295005., 6294975., 6294945., 6294915., 6294885., 6294855.,
       6294825., 6294795., 6294765., 6294735., 6294705., 6294675., 6294645.,
       6294615., 6294585., 6294555., 6294525., 6294495., 6294465., 6294435.,
       6294405., 6294375., 6294345., 6294315., 6294285., 6294255., 6294225.,
       6294195., 6294165., 6294135., 6294105., 6294075., 6294045., 6294015.,
       6293985., 6293955., 6293925., 6293895., 6293865., 6293835., 6293805.,
       6293775., 6293745., 6293715., 6293685., 6293655., 6293625., 6293595.,
       6293565., 6293535., 6293505., 6293475., 6293445., 6293415., 6293385.,
       6293355., 6293325., 6293295., 6293265., 6293235., 6293205., 6293175.,
       6293145., 6293115., 6293085., 6293055., 6293025., 6292995., 6292965.,
       6292935., 6292905., 6292875., 6292845., 6292815., 6292785., 6292755.,
       6292725., 6292695., 6292665., 6292635., 6292605., 6292575., 6292545.,
       6292515., 6292485., 6292455., 6292425., 6292395., 6292365., 6292335.,
       6292305., 6292275., 6292245., 6292215., 6292185., 6292155., 6292125.,
       6292095., 6292065., 6292035., 6292005., 6291975., 6291945., 6291915.,
       6291885., 6291855., 6291825., 6291795., 6291765., 6291735., 6291705.,
       6291675., 6291645., 6291615., 6291585., 6291555., 6291525., 6291495.,
       6291465., 6291435., 6291405., 6291375., 6291345., 6291315., 6291285.,
       6291255., 6291225., 6291195., 6291165., 6291135., 6291105.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.567e+05 3.568e+05 ... 3.606e+05</div><input id='attrs-c5d31380-5524-4fca-b33b-14b7ba0094ab' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c5d31380-5524-4fca-b33b-14b7ba0094ab' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4d626f7e-857c-48d9-b248-4ea875851aac' class='xr-var-data-in' type='checkbox'><label for='data-4d626f7e-857c-48d9-b248-4ea875851aac' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([356745., 356775., 356805., 356835., 356865., 356895., 356925., 356955.,
       356985., 357015., 357045., 357075., 357105., 357135., 357165., 357195.,
       357225., 357255., 357285., 357315., 357345., 357375., 357405., 357435.,
       357465., 357495., 357525., 357555., 357585., 357615., 357645., 357675.,
       357705., 357735., 357765., 357795., 357825., 357855., 357885., 357915.,
       357945., 357975., 358005., 358035., 358065., 358095., 358125., 358155.,
       358185., 358215., 358245., 358275., 358305., 358335., 358365., 358395.,
       358425., 358455., 358485., 358515., 358545., 358575., 358605., 358635.,
       358665., 358695., 358725., 358755., 358785., 358815., 358845., 358875.,
       358905., 358935., 358965., 358995., 359025., 359055., 359085., 359115.,
       359145., 359175., 359205., 359235., 359265., 359295., 359325., 359355.,
       359385., 359415., 359445., 359475., 359505., 359535., 359565., 359595.,
       359625., 359655., 359685., 359715., 359745., 359775., 359805., 359835.,
       359865., 359895., 359925., 359955., 359985., 360015., 360045., 360075.,
       360105., 360135., 360165., 360195., 360225., 360255., 360285., 360315.,
       360345., 360375., 360405., 360435., 360465., 360495., 360525., 360555.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-d000e5a3-70db-46bc-86db-62bc171d2d19' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d000e5a3-70db-46bc-86db-62bc171d2d19' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3f9ca879-8391-4bb7-8f4d-b981173e3332' class='xr-var-data-in' type='checkbox'><label for='data-3f9ca879-8391-4bb7-8f4d-b981173e3332' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 19S&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-69],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,10000000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32719&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>horizontal_datum_name :</span></dt><dd>World Geodetic System 1984</dd><dt><span>projected_crs_name :</span></dt><dd>WGS 84 / UTM zone 19S</dd><dt><span>grid_mapping_name :</span></dt><dd>transverse_mercator</dd><dt><span>latitude_of_projection_origin :</span></dt><dd>0.0</dd><dt><span>longitude_of_central_meridian :</span></dt><dd>-69.0</dd><dt><span>false_easting :</span></dt><dd>500000.0</dd><dt><span>false_northing :</span></dt><dd>10000000.0</dd><dt><span>scale_factor_at_central_meridian :</span></dt><dd>0.9996</dd><dt><span>spatial_ref :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 19S&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-69],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,10000000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32719&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>356730.0 30.0 0.0 6295050.0 0.0 -30.0</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-845ffef9-9067-4035-bbe6-3ed07b55d368' class='xr-section-summary-in' type='checkbox'  checked><label for='section-845ffef9-9067-4035-bbe6-3ed07b55d368' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>magnitude</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(75, 75), meta=np.ndarray&gt;</div><input id='attrs-7c704f2b-b9b4-428b-8a42-42947754e842' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-7c704f2b-b9b4-428b-8a42-42947754e842' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c7dddbc7-b271-4c46-bbe9-0be5121376fe' class='xr-var-data-in' type='checkbox'><label for='data-c7dddbc7-b271-4c46-bbe9-0be5121376fe' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 132.00 kiB </td>
                        <td> 43.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (132, 128) </td>
                        <td> (75, 75) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 4 chunks in 1 graph layer </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="166" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="116" y2="0" style="stroke-width:2" />
  <line x1="0" y1="68" x2="116" y2="68" />
  <line x1="0" y1="120" x2="116" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="68" y1="0" x2="68" y2="120" />
  <line x1="116" y1="0" x2="116" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 116.36363636363636,0.0 116.36363636363636,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="58.181818" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >128</text>
  <text x="136.363636" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,136.363636,60.000000)">132</text>
</svg>
        </td>
    </tr>
</table></div></li><li class='xr-var-item'><div class='xr-var-name'><span>date</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(75, 75), meta=np.ndarray&gt;</div><input id='attrs-86072bb5-d4eb-4047-bccb-6100b9f48075' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-86072bb5-d4eb-4047-bccb-6100b9f48075' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5522f15b-7ca9-4224-af47-47e9082d2f9f' class='xr-var-data-in' type='checkbox'><label for='data-5522f15b-7ca9-4224-af47-47e9082d2f9f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><table>
    <tr>
        <td>
            <table style="border-collapse: collapse;">
                <thead>
                    <tr>
                        <td> </td>
                        <th> Array </th>
                        <th> Chunk </th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <th> Bytes </th>
                        <td> 132.00 kiB </td>
                        <td> 43.95 kiB </td>
                    </tr>

                    <tr>
                        <th> Shape </th>
                        <td> (132, 128) </td>
                        <td> (75, 75) </td>
                    </tr>
                    <tr>
                        <th> Dask graph </th>
                        <td colspan="2"> 4 chunks in 1 graph layer </td>
                    </tr>
                    <tr>
                        <th> Data type </th>
                        <td colspan="2"> float64 numpy.ndarray </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td>
        <svg width="166" height="170" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="0" y1="0" x2="116" y2="0" style="stroke-width:2" />
  <line x1="0" y1="68" x2="116" y2="68" />
  <line x1="0" y1="120" x2="116" y2="120" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="0" y1="0" x2="0" y2="120" style="stroke-width:2" />
  <line x1="68" y1="0" x2="68" y2="120" />
  <line x1="116" y1="0" x2="116" y2="120" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="0.0,0.0 116.36363636363636,0.0 116.36363636363636,120.0 0.0,120.0" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="58.181818" y="140.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" >128</text>
  <text x="136.363636" y="60.000000" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,136.363636,60.000000)">132</text>
</svg>
        </td>
    </tr>
</table></div></li></ul></div></li><li class='xr-section-item'><input id='section-6eaeac71-853e-40c0-ac2a-3703e1fdbda8' class='xr-section-summary-in' type='checkbox'  ><label for='section-6eaeac71-853e-40c0-ac2a-3703e1fdbda8' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-e9ea5677-ffe2-43ef-887e-ed9976d4a205' class='xr-index-data-in' type='checkbox'/><label for='index-e9ea5677-ffe2-43ef-887e-ed9976d4a205' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([6295035.0, 6295005.0, 6294975.0, 6294945.0, 6294915.0, 6294885.0,
       6294855.0, 6294825.0, 6294795.0, 6294765.0,
       ...
       6291375.0, 6291345.0, 6291315.0, 6291285.0, 6291255.0, 6291225.0,
       6291195.0, 6291165.0, 6291135.0, 6291105.0],
      dtype=&#x27;float64&#x27;, name=&#x27;y&#x27;, length=132))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-b622a52b-63ef-4e8a-9bdf-18f7d84f1c66' class='xr-index-data-in' type='checkbox'/><label for='index-b622a52b-63ef-4e8a-9bdf-18f7d84f1c66' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([356745.0, 356775.0, 356805.0, 356835.0, 356865.0, 356895.0, 356925.0,
       356955.0, 356985.0, 357015.0,
       ...
       360285.0, 360315.0, 360345.0, 360375.0, 360405.0, 360435.0, 360465.0,
       360495.0, 360525.0, 360555.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=128))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f0138750-20ca-4686-b1ed-4f6ca2733e78' class='xr-section-summary-in' type='checkbox'  checked><label for='section-f0138750-20ca-4686-b1ed-4f6ca2733e78' class='xr-section-summary' >Attributes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>crs :</span></dt><dd>EPSG:32719</dd><dt><span>grid_mapping :</span></dt><dd>spatial_ref</dd></dl></div></li></ul></div></div></div>
</div>
<p>En el resultado de la celda anterior nos indica que se mantienen tanto las variables <code class="docutils literal notranslate"><span class="pre">magnitude</span></code> y <code class="docutils literal notranslate"><span class="pre">date</span></code>, asi como las dimensiones <code class="docutils literal notranslate"><span class="pre">y</span></code> y <code class="docutils literal notranslate"><span class="pre">x</span></code>. Sin embargo, ya no contamos con la dimensión <code class="docutils literal notranslate"><span class="pre">bkp</span></code>.</p>
<p>Con el objeto <code class="docutils literal notranslate"><span class="pre">pelt_filtered</span></code> utilizamos las funciones <code class="docutils literal notranslate"><span class="pre">sns.stats</span></code> para obtener estadísticas de vecindario. El argumento <code class="docutils literal notranslate"><span class="pre">kernel</span></code> permite definir el vecindario, si se entrega un entero, el vecindario será un kernel cuadrado de radio igual al entero entregado.</p>
<p>Podemos ejecutar la siguiente celda para generar los objetos requeridos: &gt; Recordemos que <code class="docutils literal notranslate"><span class="pre">neighbor_radius</span></code> tiene un valor de 50.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date_std</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">stats</span><span class="p">(</span><span class="n">pelt_filtered</span><span class="p">,</span> <span class="n">stat</span> <span class="o">=</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="n">kernel</span> <span class="o">=</span> <span class="n">neighbor_radius</span><span class="p">,</span> <span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;date&#39;</span><span class="p">)</span>
<span class="n">date_cnt</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">stats</span><span class="p">(</span><span class="n">pelt_filtered</span><span class="p">,</span> <span class="n">stat</span> <span class="o">=</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">kernel</span> <span class="o">=</span> <span class="n">neighbor_radius</span><span class="p">,</span> <span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;date&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Adicionalmente, vamos a guardar tres resultados en un <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> llamado <code class="docutils literal notranslate"><span class="pre">inputImg</span></code>.</p>
<p>Estos resultados son <code class="docutils literal notranslate"><span class="pre">pelt_filtered.magnitude</span></code>, <code class="docutils literal notranslate"><span class="pre">date_std</span></code> y <code class="docutils literal notranslate"><span class="pre">date_cnt</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">inputImg</span> <span class="o">=</span> <span class="n">pelt_filtered</span><span class="o">.</span><span class="n">magnitude</span><span class="o">.</span><span class="n">to_dataset</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;magnitude&#39;</span><span class="p">,</span> <span class="n">promote_attrs</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">inputImg</span><span class="p">[[</span><span class="s1">&#39;ngbh_stdev&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">date_std</span>
<span class="n">inputImg</span><span class="p">[[</span><span class="s1">&#39;ngbh_count&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">date_cnt</span>
</pre></div>
</div>
</div>
<p>Podemos observar estas variables de manera gráfica</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">inputImg</span><span class="o">.</span><span class="n">data_vars</span><span class="p">):</span>
    <span class="n">inputImg</span><span class="p">[</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_48_0.png" src="../../_images/_static_notebooks_01_SAMSARA_app_48_0.png" />
</div>
</div>
</section>
<hr class="docutils" />
<section id="GLCM">
<h2>GLCM<a class="headerlink" href="#GLCM" title="Link to this heading">#</a></h2>
<p>En esta sección calcularemos 7 métricas de texturas desde la matriz <em>Gray-Level Co-occurrence Matrix (GLCM)</em>. La librería <a class="reference external" href="https://github.com/Data-Observatory/lib-samsara">SAMSARA</a> utiliza una implementación de GLCM de <a class="reference external" href="https://scikit-image.org/docs/stable/auto_examples/features_detection/plot_glcm.html">scikit-image</a>, pero aplicado un filtro con un <code class="docutils literal notranslate"><span class="pre">kernel</span></code> cuadrado de radio 7 y cuya función es calcular GLCM y sus texturas.</p>
<p>Para cargar las funciones requeridas debemos ejecutar la siguiente celda:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">samsara.kernel</span> <span class="k">as</span> <span class="nn">skernel</span>
<span class="kn">import</span> <span class="nn">samsara.stats.glcm</span> <span class="k">as</span> <span class="nn">sglcm</span>
</pre></div>
</div>
</div>
<section id="Suavizamiento-previo">
<h3>Suavizamiento previo<a class="headerlink" href="#Suavizamiento-previo" title="Link to this heading">#</a></h3>
<p>Previo a la obtención de las texturas se adoptó un proceso de suavizado de las magnitudes negativas de <code class="docutils literal notranslate"><span class="pre">NDVI</span></code>. Este suavizado consiste en la ejecución de un filtro circular de media de radio 15. Luego, para cada pixel, si el valor absoluto de la sustracción entre el <code class="docutils literal notranslate"><span class="pre">NDVI</span></code> y el resultado filtrado es mayor que 0.2, se utiliza el resultado filtrado, en caso contrario se mantiene el valor original de <code class="docutils literal notranslate"><span class="pre">NDVI</span></code>.</p>
<p>Primero, generamos el kernel circular de radio 15 ejecutando la siguiente celda:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r15_circle_kernel</span> <span class="o">=</span> <span class="n">skernel</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">smooth_radius</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Podemos explorar la forma del kernel ejecutando la siguiente celda:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">r15_circle_kernel</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_54_0.png" src="../../_images/_static_notebooks_01_SAMSARA_app_54_0.png" />
</div>
</div>
<p>Similar a lo revisado en estadísticas de vecindarios, utilizamos <code class="docutils literal notranslate"><span class="pre">sns.stats</span></code> para obtener el filtro de media para el kernel circular.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">focal</span> <span class="o">=</span>  <span class="n">sns</span><span class="o">.</span><span class="n">stats</span><span class="p">(</span><span class="n">inputImg</span><span class="p">,</span> <span class="n">stat</span> <span class="o">=</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="n">kernel</span> <span class="o">=</span> <span class="n">r15_circle_kernel</span><span class="p">,</span> <span class="n">variable</span> <span class="o">=</span> <span class="s1">&#39;magnitude&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Posteriormente aplicamos el suavizado ejecutando la siguiente celda:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pelt_filtered_magnitude_smooth</span> <span class="o">=</span> <span class="n">focal</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">inputImg</span><span class="o">.</span><span class="n">magnitude</span> <span class="o">-</span> <span class="n">focal</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="n">inputImg</span><span class="o">.</span><span class="n">magnitude</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Podemos observar el resultado de la suavización de manera gráfica:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pelt_filtered_magnitude_smooth</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa8814a1ea0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_60_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_60_1.png" />
</div>
</div>
</section>
<section id="Transformación-de-valores">
<h3>Transformación de valores<a class="headerlink" href="#Transformación-de-valores" title="Link to this heading">#</a></h3>
<p>Ahora, debemos transformar el objeto anterior a valores enteros para que sean utilizados en GLCM. Para esto utilizamos la función <code class="docutils literal notranslate"><span class="pre">xr_transform</span></code> definida en la siguiente celda, y definimos 8 niveles distintos. Si el archivo tiene <code class="docutils literal notranslate"><span class="pre">nan</span></code>s serán 9 niveles, reservando un nivel para los <code class="docutils literal notranslate"><span class="pre">nan</span></code>s y luego excluyendolos de la matrix de co-ocurrencia de valores grises a través del argumento <code class="docutils literal notranslate"><span class="pre">nan_supression</span> <span class="pre">=</span> <span class="pre">3</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">xr_transform</span><span class="p">(</span><span class="n">xarray</span><span class="p">,</span> <span class="n">levels</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="c1"># Esta función reduce la resolución radiométrica de la imagen</span>
    <span class="n">xr</span> <span class="o">=</span> <span class="n">xarray</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="n">xarray</span><span class="o">.</span><span class="n">dtype</span>
    <span class="nb">min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">xr</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="nb">max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">xr</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">zi</span> <span class="o">=</span> <span class="p">(</span><span class="n">xr</span> <span class="o">-</span> <span class="nb">min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">max</span> <span class="o">-</span> <span class="nb">min</span><span class="p">)</span>
    <span class="n">li</span> <span class="o">=</span> <span class="p">(</span><span class="n">zi</span><span class="o">*</span><span class="p">(</span><span class="n">levels</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">xr</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
         <span class="n">li</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">li</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">xr</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">li</span><span class="o">.</span><span class="n">round</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
    <span class="k">return</span><span class="p">(</span><span class="n">xr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">levels</span> <span class="o">=</span> <span class="mi">2</span><span class="o">**</span><span class="mi">3</span>
<span class="k">if</span> <span class="p">(</span><span class="n">pelt_filtered_magnitude_smooth</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
    <span class="n">new_levels</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">levels</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">new_levels</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">levels</span><span class="p">)</span>

<span class="n">data3</span> <span class="o">=</span> <span class="n">xr_transform</span><span class="p">(</span><span class="n">pelt_filtered_magnitude_smooth</span><span class="p">,</span> <span class="n">levels</span> <span class="o">=</span> <span class="n">levels</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Podemos observar el resultado de la transformación de manera gráfica:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data3</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa88087d6f0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_65_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_65_1.png" />
</div>
</div>
</section>
<section id="Aplicación-de-GLCM">
<h3>Aplicación de GLCM<a class="headerlink" href="#Aplicación-de-GLCM" title="Link to this heading">#</a></h3>
<p>Ya hemos generado el archivo de entrada para obtener las texturas de GLCM, ahora debemos definir: * radio del kernel - debe ser mayor o igual a la mayor distancia. Fue previamente definido en <code class="docutils literal notranslate"><span class="pre">glcm_radius</span></code> * distancias - número de píxeles desde el centro del kernel que se utilizarán para calcular la matriz de co-ocurrencia de valores grises para cada ángulo. * ángulos - hacia dónde se calcularán los GLCM para cada distancia. Los ángulos se entregan en radianes, con valor cero hacia el Este
y aumentando en sentido anti-horario.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">distances</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
<span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="o">*</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span> <span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span> <span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span> <span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<p>Además, definiremos otros parámetros para el calculo de GLCM y texturas: * symmetric: True - Parámetro interno de <a class="reference external" href="https://scikit-image.org/docs/stable/api/skimage.feature.html#skimage.feature.graycomatrix">GLCM de skimage</a>. Si <code class="docutils literal notranslate"><span class="pre">symmetric</span></code> es True, se ignora el orden de los pares de valores, siendo el píxel (i, j) y (j, i) contados cuando se pide (i, j). Esto ayuda a disminuir la intensidad de cómputo y por esto no se calculan las co-ocurrencias todas las direcciones. * normed: True -
Parámetro interno de <a class="reference external" href="https://scikit-image.org/docs/stable/api/skimage.feature.html#skimage.feature.graycomatrix">GLCM de skimage</a>. Si <code class="docutils literal notranslate"><span class="pre">normed</span></code> es True, cada matriz P[:, :, d, theta] es dividida por el número acumulado de co-ocurrencias, resultando en una matriz que suma 1.</p>
<ul class="simple">
<li><p>skip_nan: True - Parámetro de samsara. Si <code class="docutils literal notranslate"><span class="pre">skip_nan</span></code> es True, y el pixel central de un kernel tiene valor cero, asigna <code class="docutils literal notranslate"><span class="pre">nan</span></code> al resultado de las texturas.</p></li>
<li><p>nan_supression: 3 - Parámetro de samsara.</p>
<ul>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">nan_supression</span></code> es 0, mantiene los valores de la matriz de co-ocurrencias.</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">nan_supression</span></code> es 1, reasigna el valor del primer elemento de la matriz de co-ocurrencias a 0. El primer elemento corresponde a la intersección de la primera fila y la primera columna.</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">nan_supression</span></code> es 2, reasigna el valor de la primera fila y la primera columna de la matriz de co-ocurrencias a 0.</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">nan_supression</span></code> es 3, elimina la primera fila y columna de la matriz de co-ocurrencias. Recomendado si se reserva un nivel para <code class="docutils literal notranslate"><span class="pre">nan</span></code>s</p></li>
</ul>
</li>
<li><p>rescale_normed: True - Parámetro de samsara. Si <code class="docutils literal notranslate"><span class="pre">normed</span></code> es True, re-escala los valores de cada matrix de co-ocurrencia luego de utilizar <code class="docutils literal notranslate"><span class="pre">nan_supression</span></code> para que vuelva a resultar en una matriz que suma 1.</p></li>
</ul>
<p>Estos parámetros se guardaran en un diccionario llamado <code class="docutils literal notranslate"><span class="pre">mb_kwargs</span></code>, al ejecutar la siguiente celda:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mb_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;distances&#39;</span> <span class="p">:</span> <span class="n">distances</span><span class="p">,</span>
    <span class="s1">&#39;angles&#39;</span> <span class="p">:</span> <span class="n">angles</span><span class="p">,</span>
    <span class="s1">&#39;levels&#39;</span> <span class="p">:</span> <span class="n">new_levels</span><span class="p">,</span>
    <span class="s1">&#39;symmetric&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;normed&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;skip_nan&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;nan_supression&#39;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s1">&#39;rescale_normed&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Luego, se calculan las texturas al ejecutar la siguiente celda:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glcm</span> <span class="o">=</span> <span class="n">sglcm</span><span class="o">.</span><span class="n">glcm_textures</span><span class="p">(</span><span class="n">data3</span><span class="p">,</span> <span class="n">radius</span> <span class="o">=</span> <span class="n">glcm_radius</span><span class="p">,</span> <span class="n">n_feats</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="o">**</span><span class="n">mb_kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Observamos que <code class="docutils literal notranslate"><span class="pre">glcm</span></code>, tiene 3 dimensiones, <code class="docutils literal notranslate"><span class="pre">prop</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, y <code class="docutils literal notranslate"><span class="pre">x</span></code>. Los elementos de <code class="docutils literal notranslate"><span class="pre">prop</span></code> son: * <code class="docutils literal notranslate"><span class="pre">asm</span></code> o segundo momento angular: Representa la uniformidad de distribución de niveles grises en la imagen (kernel), varía desde el inverso del cuadrado del total de niveles de grises hasta 1, donde 1 representa una imagen constante. * <code class="docutils literal notranslate"><span class="pre">contrast</span></code> o contraste: Es una medida de variación local presente en una imagen (kernel) y varía desde 0 hasta el número total de niveles de grises menos
uno al cuadrado, donde un contraste alto representa una alta variación. * <code class="docutils literal notranslate"><span class="pre">corr</span></code> o correlación: Es una medida de la dependencia linear de valores grises con respecto a píxeles vecinos. * <code class="docutils literal notranslate"><span class="pre">var</span></code> o varianza: Medida de heterogeneidad de niveles grises en la imagen. * <code class="docutils literal notranslate"><span class="pre">idm</span></code> o momento diferencial inverso: Mide la homogeneidad local de una imagen (kernel), valores altos representan mayor homogeneidad. * <code class="docutils literal notranslate"><span class="pre">savg</span></code> o suma promedio: Es la media de las sumas de pixeles que co-ocurren en la imagen
(kernel). * <code class="docutils literal notranslate"><span class="pre">entropy</span></code> o entropía: Es una medición estadística de aleatoridad y varía desde 0 hasta infinito.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">glcm</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray (prop: 7, y: 132, x: 128)&gt;
array([[[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],

       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],

       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
...
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],

       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],

       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]]])
Coordinates:
  * prop         (prop) &lt;U8 &#x27;asm&#x27; &#x27;contrast&#x27; &#x27;corr&#x27; &#x27;var&#x27; &#x27;idm&#x27; &#x27;savg&#x27; &#x27;entropy&#x27;
  * y            (y) float64 6.295e+06 6.295e+06 ... 6.291e+06 6.291e+06
  * x            (x) float64 3.567e+05 3.568e+05 ... 3.605e+05 3.606e+05
    spatial_ref  int64 0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'></div><ul class='xr-dim-list'><li><span class='xr-has-index'>prop</span>: 7</li><li><span class='xr-has-index'>y</span>: 132</li><li><span class='xr-has-index'>x</span>: 128</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-66944f21-3413-4a15-97ac-a89dcf07b5c1' class='xr-array-in' type='checkbox' checked><label for='section-66944f21-3413-4a15-97ac-a89dcf07b5c1' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>nan nan nan nan nan nan nan nan ... nan nan nan nan nan nan nan nan</span></div><div class='xr-array-data'><pre>array([[[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],

       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],

       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
...
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],

       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],

       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]]])</pre></div></div></li><li class='xr-section-item'><input id='section-8c2a5a7e-16ee-431b-97dd-862bc43beae2' class='xr-section-summary-in' type='checkbox'  checked><label for='section-8c2a5a7e-16ee-431b-97dd-862bc43beae2' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>prop</span></div><div class='xr-var-dims'>(prop)</div><div class='xr-var-dtype'>&lt;U8</div><div class='xr-var-preview xr-preview'>&#x27;asm&#x27; &#x27;contrast&#x27; ... &#x27;entropy&#x27;</div><input id='attrs-e243448e-216d-4a3e-8565-5373ce36001c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e243448e-216d-4a3e-8565-5373ce36001c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3f96749e-a8c8-45b0-be4a-c2465fe4af21' class='xr-var-data-in' type='checkbox'><label for='data-3f96749e-a8c8-45b0-be4a-c2465fe4af21' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;asm&#x27;, &#x27;contrast&#x27;, &#x27;corr&#x27;, &#x27;var&#x27;, &#x27;idm&#x27;, &#x27;savg&#x27;, &#x27;entropy&#x27;], dtype=&#x27;&lt;U8&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>6.295e+06 6.295e+06 ... 6.291e+06</div><input id='attrs-38a085ad-20ea-4cc4-9e9b-c59df9aedd4d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-38a085ad-20ea-4cc4-9e9b-c59df9aedd4d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-11716377-1102-45e4-811a-1aa15d8424f1' class='xr-var-data-in' type='checkbox'><label for='data-11716377-1102-45e4-811a-1aa15d8424f1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([6295035., 6295005., 6294975., 6294945., 6294915., 6294885., 6294855.,
       6294825., 6294795., 6294765., 6294735., 6294705., 6294675., 6294645.,
       6294615., 6294585., 6294555., 6294525., 6294495., 6294465., 6294435.,
       6294405., 6294375., 6294345., 6294315., 6294285., 6294255., 6294225.,
       6294195., 6294165., 6294135., 6294105., 6294075., 6294045., 6294015.,
       6293985., 6293955., 6293925., 6293895., 6293865., 6293835., 6293805.,
       6293775., 6293745., 6293715., 6293685., 6293655., 6293625., 6293595.,
       6293565., 6293535., 6293505., 6293475., 6293445., 6293415., 6293385.,
       6293355., 6293325., 6293295., 6293265., 6293235., 6293205., 6293175.,
       6293145., 6293115., 6293085., 6293055., 6293025., 6292995., 6292965.,
       6292935., 6292905., 6292875., 6292845., 6292815., 6292785., 6292755.,
       6292725., 6292695., 6292665., 6292635., 6292605., 6292575., 6292545.,
       6292515., 6292485., 6292455., 6292425., 6292395., 6292365., 6292335.,
       6292305., 6292275., 6292245., 6292215., 6292185., 6292155., 6292125.,
       6292095., 6292065., 6292035., 6292005., 6291975., 6291945., 6291915.,
       6291885., 6291855., 6291825., 6291795., 6291765., 6291735., 6291705.,
       6291675., 6291645., 6291615., 6291585., 6291555., 6291525., 6291495.,
       6291465., 6291435., 6291405., 6291375., 6291345., 6291315., 6291285.,
       6291255., 6291225., 6291195., 6291165., 6291135., 6291105.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.567e+05 3.568e+05 ... 3.606e+05</div><input id='attrs-bfa6fe99-e56a-42a1-a6fe-8ee75c86343e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-bfa6fe99-e56a-42a1-a6fe-8ee75c86343e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ef7e5e7b-c766-444d-b5a1-e84a652559a7' class='xr-var-data-in' type='checkbox'><label for='data-ef7e5e7b-c766-444d-b5a1-e84a652559a7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([356745., 356775., 356805., 356835., 356865., 356895., 356925., 356955.,
       356985., 357015., 357045., 357075., 357105., 357135., 357165., 357195.,
       357225., 357255., 357285., 357315., 357345., 357375., 357405., 357435.,
       357465., 357495., 357525., 357555., 357585., 357615., 357645., 357675.,
       357705., 357735., 357765., 357795., 357825., 357855., 357885., 357915.,
       357945., 357975., 358005., 358035., 358065., 358095., 358125., 358155.,
       358185., 358215., 358245., 358275., 358305., 358335., 358365., 358395.,
       358425., 358455., 358485., 358515., 358545., 358575., 358605., 358635.,
       358665., 358695., 358725., 358755., 358785., 358815., 358845., 358875.,
       358905., 358935., 358965., 358995., 359025., 359055., 359085., 359115.,
       359145., 359175., 359205., 359235., 359265., 359295., 359325., 359355.,
       359385., 359415., 359445., 359475., 359505., 359535., 359565., 359595.,
       359625., 359655., 359685., 359715., 359745., 359775., 359805., 359835.,
       359865., 359895., 359925., 359955., 359985., 360015., 360045., 360075.,
       360105., 360135., 360165., 360195., 360225., 360255., 360285., 360315.,
       360345., 360375., 360405., 360435., 360465., 360495., 360525., 360555.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0</div><input id='attrs-af6fdbb2-6960-43b0-904e-55653b49664e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-af6fdbb2-6960-43b0-904e-55653b49664e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-26c23a57-268b-4b78-bd18-ce57dd68e700' class='xr-var-data-in' type='checkbox'><label for='data-26c23a57-268b-4b78-bd18-ce57dd68e700' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>crs_wkt :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 19S&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-69],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,10000000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32719&quot;]]</dd><dt><span>semi_major_axis :</span></dt><dd>6378137.0</dd><dt><span>semi_minor_axis :</span></dt><dd>6356752.314245179</dd><dt><span>inverse_flattening :</span></dt><dd>298.257223563</dd><dt><span>reference_ellipsoid_name :</span></dt><dd>WGS 84</dd><dt><span>longitude_of_prime_meridian :</span></dt><dd>0.0</dd><dt><span>prime_meridian_name :</span></dt><dd>Greenwich</dd><dt><span>geographic_crs_name :</span></dt><dd>WGS 84</dd><dt><span>horizontal_datum_name :</span></dt><dd>World Geodetic System 1984</dd><dt><span>projected_crs_name :</span></dt><dd>WGS 84 / UTM zone 19S</dd><dt><span>grid_mapping_name :</span></dt><dd>transverse_mercator</dd><dt><span>latitude_of_projection_origin :</span></dt><dd>0.0</dd><dt><span>longitude_of_central_meridian :</span></dt><dd>-69.0</dd><dt><span>false_easting :</span></dt><dd>500000.0</dd><dt><span>false_northing :</span></dt><dd>10000000.0</dd><dt><span>scale_factor_at_central_meridian :</span></dt><dd>0.9996</dd><dt><span>spatial_ref :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 19S&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-69],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,10000000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32719&quot;]]</dd><dt><span>GeoTransform :</span></dt><dd>356730.0 30.0 0.0 6295050.0 0.0 -30.0</dd></dl></div><div class='xr-var-data'><pre>array(0)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-e39be362-29c9-472b-98bf-2577d9ce3d00' class='xr-section-summary-in' type='checkbox'  ><label for='section-e39be362-29c9-472b-98bf-2577d9ce3d00' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>prop</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-22be7fef-f64c-4a33-8b3b-1f6e59e67d1a' class='xr-index-data-in' type='checkbox'/><label for='index-22be7fef-f64c-4a33-8b3b-1f6e59e67d1a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;asm&#x27;, &#x27;contrast&#x27;, &#x27;corr&#x27;, &#x27;var&#x27;, &#x27;idm&#x27;, &#x27;savg&#x27;, &#x27;entropy&#x27;], dtype=&#x27;object&#x27;, name=&#x27;prop&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-bb2f1870-07c9-4cd1-bff8-4d743fef0662' class='xr-index-data-in' type='checkbox'/><label for='index-bb2f1870-07c9-4cd1-bff8-4d743fef0662' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([6295035.0, 6295005.0, 6294975.0, 6294945.0, 6294915.0, 6294885.0,
       6294855.0, 6294825.0, 6294795.0, 6294765.0,
       ...
       6291375.0, 6291345.0, 6291315.0, 6291285.0, 6291255.0, 6291225.0,
       6291195.0, 6291165.0, 6291135.0, 6291105.0],
      dtype=&#x27;float64&#x27;, name=&#x27;y&#x27;, length=132))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-b81597d8-d8df-446a-8ddd-213088c7a4b1' class='xr-index-data-in' type='checkbox'/><label for='index-b81597d8-d8df-446a-8ddd-213088c7a4b1' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([356745.0, 356775.0, 356805.0, 356835.0, 356865.0, 356895.0, 356925.0,
       356955.0, 356985.0, 357015.0,
       ...
       360285.0, 360315.0, 360345.0, 360375.0, 360405.0, 360435.0, 360465.0,
       360495.0, 360525.0, 360555.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=128))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ae770c05-3447-474a-9430-948a5484fa3e' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-ae770c05-3447-474a-9430-948a5484fa3e' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>Podemos visualizar los resultados a través del código de la siguiente celda, donde el primer elemento corresponde a los niveles de grises que entraron a la función de GLCM y, el resto de los elementos son las textura calculadas.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">data3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">glcm</span><span class="p">):</span>
    <span class="n">elem</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[(</span><span class="n">count</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="mi">4</span><span class="p">,</span> <span class="p">(</span><span class="n">count</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="k">4</span>])
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_75_0.png" src="../../_images/_static_notebooks_01_SAMSARA_app_75_0.png" />
</div>
</div>
<p>Al igual que en la sección anterior, vamos a guardar estos resultados en el <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> llamado <code class="docutils literal notranslate"><span class="pre">inputImg</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">inputImg</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">merge</span><span class="p">([</span><span class="n">inputImg</span><span class="p">,</span> <span class="n">glcm</span><span class="o">.</span><span class="n">to_dataset</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;prop&quot;</span><span class="p">,</span> <span class="n">promote_attrs</span><span class="o">=</span><span class="kc">True</span><span class="p">)])</span>
</pre></div>
</div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="Aplicación-del-modelo-Random-Forest">
<h2>Aplicación del modelo Random Forest<a class="headerlink" href="#Aplicación-del-modelo-Random-Forest" title="Link to this heading">#</a></h2>
<p>Se utilizó el paquete de sklearn para entrenar un modelo de <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html">clasificación de Random Forest</a>.</p>
<p>El modelo ya fue entrenado, y podemos cargarlo usando la siguiente celda:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rf_model</span> <span class="o">=</span> <span class="s2">&quot;RF_v03_all-trained_negative_of_first.joblib&quot;</span>
<span class="n">nname</span> <span class="o">=</span> <span class="n">rf_model</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">classifier</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">rf_model</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>El paquete sklearn no funciona directamente con xarray. Afortunadamente la función <code class="docutils literal notranslate"><span class="pre">predict_xr</span></code> disponible en <code class="docutils literal notranslate"><span class="pre">dea_tools</span></code> permite ejecutar el modelo en un <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> que contenga los nuevos datos.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">inputImgf</span> <span class="o">=</span> <span class="n">inputImg</span><span class="o">.</span><span class="n">chunk</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">})</span> <span class="c1">#TODO: idealmente eliminar el cambio de nombre en las variables</span>
<span class="n">classified</span> <span class="o">=</span> <span class="n">predict_xr</span><span class="p">(</span><span class="n">model</span> <span class="o">=</span> <span class="n">classifier</span><span class="p">,</span>
                        <span class="n">input_xr</span> <span class="o">=</span> <span class="n">inputImgf</span><span class="p">,</span>
                        <span class="n">clean</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">name_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Predictions&quot;</span><span class="p">:</span> <span class="s2">&quot;y_predict&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<span class="n">classified</span><span class="o">.</span><span class="n">attrs</span> <span class="o">=</span> <span class="n">inputImg</span><span class="o">.</span><span class="n">attrs</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
predicting...
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/env/lib/python3.10/site-packages/sklearn/base.py:465: UserWarning: X does not have valid feature names, but RandomForestClassifier was fitted with feature names
  warnings.warn(
</pre></div></div>
</div>
<p>Podemos explorar los resultados de <code class="docutils literal notranslate"><span class="pre">classified</span></code>, que entrega un <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code> con <code class="docutils literal notranslate"><span class="pre">y_predict</span></code> como variable</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">classified</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:      (x: 128, y: 132)
Coordinates:
  * x            (x) float64 3.567e+05 3.568e+05 ... 3.605e+05 3.606e+05
  * y            (y) float64 6.295e+06 6.295e+06 ... 6.291e+06 6.291e+06
    spatial_ref  int32 32719
Data variables:
    y_predict    (y, x) int64 0 0 0 0 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0 0 0 0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-9991a856-b781-4342-9f48-7826fd274193' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-9991a856-b781-4342-9f48-7826fd274193' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 128</li><li><span class='xr-has-index'>y</span>: 132</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-faa552c5-17da-4d19-a817-ba9157ccba48' class='xr-section-summary-in' type='checkbox'  checked><label for='section-faa552c5-17da-4d19-a817-ba9157ccba48' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>3.567e+05 3.568e+05 ... 3.606e+05</div><input id='attrs-777de231-7db1-4479-90f1-c3db5da6e9c1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-777de231-7db1-4479-90f1-c3db5da6e9c1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-53f3fdaf-64d5-4b6f-9d87-e8c1298cdcc2' class='xr-var-data-in' type='checkbox'><label for='data-53f3fdaf-64d5-4b6f-9d87-e8c1298cdcc2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([356745., 356775., 356805., 356835., 356865., 356895., 356925., 356955.,
       356985., 357015., 357045., 357075., 357105., 357135., 357165., 357195.,
       357225., 357255., 357285., 357315., 357345., 357375., 357405., 357435.,
       357465., 357495., 357525., 357555., 357585., 357615., 357645., 357675.,
       357705., 357735., 357765., 357795., 357825., 357855., 357885., 357915.,
       357945., 357975., 358005., 358035., 358065., 358095., 358125., 358155.,
       358185., 358215., 358245., 358275., 358305., 358335., 358365., 358395.,
       358425., 358455., 358485., 358515., 358545., 358575., 358605., 358635.,
       358665., 358695., 358725., 358755., 358785., 358815., 358845., 358875.,
       358905., 358935., 358965., 358995., 359025., 359055., 359085., 359115.,
       359145., 359175., 359205., 359235., 359265., 359295., 359325., 359355.,
       359385., 359415., 359445., 359475., 359505., 359535., 359565., 359595.,
       359625., 359655., 359685., 359715., 359745., 359775., 359805., 359835.,
       359865., 359895., 359925., 359955., 359985., 360015., 360045., 360075.,
       360105., 360135., 360165., 360195., 360225., 360255., 360285., 360315.,
       360345., 360375., 360405., 360435., 360465., 360495., 360525., 360555.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>6.295e+06 6.295e+06 ... 6.291e+06</div><input id='attrs-8662ba06-64b6-4752-86aa-8026a92f06ab' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8662ba06-64b6-4752-86aa-8026a92f06ab' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b715c036-ea17-4472-82c6-decba28794f4' class='xr-var-data-in' type='checkbox'><label for='data-b715c036-ea17-4472-82c6-decba28794f4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([6295035., 6295005., 6294975., 6294945., 6294915., 6294885., 6294855.,
       6294825., 6294795., 6294765., 6294735., 6294705., 6294675., 6294645.,
       6294615., 6294585., 6294555., 6294525., 6294495., 6294465., 6294435.,
       6294405., 6294375., 6294345., 6294315., 6294285., 6294255., 6294225.,
       6294195., 6294165., 6294135., 6294105., 6294075., 6294045., 6294015.,
       6293985., 6293955., 6293925., 6293895., 6293865., 6293835., 6293805.,
       6293775., 6293745., 6293715., 6293685., 6293655., 6293625., 6293595.,
       6293565., 6293535., 6293505., 6293475., 6293445., 6293415., 6293385.,
       6293355., 6293325., 6293295., 6293265., 6293235., 6293205., 6293175.,
       6293145., 6293115., 6293085., 6293055., 6293025., 6292995., 6292965.,
       6292935., 6292905., 6292875., 6292845., 6292815., 6292785., 6292755.,
       6292725., 6292695., 6292665., 6292635., 6292605., 6292575., 6292545.,
       6292515., 6292485., 6292455., 6292425., 6292395., 6292365., 6292335.,
       6292305., 6292275., 6292245., 6292215., 6292185., 6292155., 6292125.,
       6292095., 6292065., 6292035., 6292005., 6291975., 6291945., 6291915.,
       6291885., 6291855., 6291825., 6291795., 6291765., 6291735., 6291705.,
       6291675., 6291645., 6291615., 6291585., 6291555., 6291525., 6291495.,
       6291465., 6291435., 6291405., 6291375., 6291345., 6291315., 6291285.,
       6291255., 6291225., 6291195., 6291165., 6291135., 6291105.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>spatial_ref</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>32719</div><input id='attrs-337e8c98-7d63-4bfd-a0fb-b0f48ca38a3b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-337e8c98-7d63-4bfd-a0fb-b0f48ca38a3b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2fa8403b-c60e-4716-b0e4-5627d67c0da5' class='xr-var-data-in' type='checkbox'><label for='data-2fa8403b-c60e-4716-b0e4-5627d67c0da5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>spatial_ref :</span></dt><dd>PROJCS[&quot;WGS 84 / UTM zone 19S&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-69],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,10000000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH],AUTHORITY[&quot;EPSG&quot;,&quot;32719&quot;]]</dd><dt><span>grid_mapping_name :</span></dt><dd>transverse_mercator</dd></dl></div><div class='xr-var-data'><pre>array(32719, dtype=int32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-bc1d6ba9-5a5c-4ebc-980b-e49005902402' class='xr-section-summary-in' type='checkbox'  checked><label for='section-bc1d6ba9-5a5c-4ebc-980b-e49005902402' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>y_predict</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0</div><input id='attrs-e6aa869d-ad39-4008-94a1-da46314e660a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e6aa869d-ad39-4008-94a1-da46314e660a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-042258c0-9bea-4ad6-bcc4-c9c31ea104fb' class='xr-var-data-in' type='checkbox'><label for='data-042258c0-9bea-4ad6-bcc4-c9c31ea104fb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>grid_mapping :</span></dt><dd>spatial_ref</dd></dl></div><div class='xr-var-data'><pre>array([[0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       ...,
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-85e1cca8-c681-478f-9fad-dba711eb78d5' class='xr-section-summary-in' type='checkbox'  ><label for='section-85e1cca8-c681-478f-9fad-dba711eb78d5' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-718e64d7-8900-4d0c-8590-7b759c667b39' class='xr-index-data-in' type='checkbox'/><label for='index-718e64d7-8900-4d0c-8590-7b759c667b39' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([356745.0, 356775.0, 356805.0, 356835.0, 356865.0, 356895.0, 356925.0,
       356955.0, 356985.0, 357015.0,
       ...
       360285.0, 360315.0, 360345.0, 360375.0, 360405.0, 360435.0, 360465.0,
       360495.0, 360525.0, 360555.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=128))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-80e89a12-8239-457e-834f-529923b047c9' class='xr-index-data-in' type='checkbox'/><label for='index-80e89a12-8239-457e-834f-529923b047c9' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([6295035.0, 6295005.0, 6294975.0, 6294945.0, 6294915.0, 6294885.0,
       6294855.0, 6294825.0, 6294795.0, 6294765.0,
       ...
       6291375.0, 6291345.0, 6291315.0, 6291285.0, 6291255.0, 6291225.0,
       6291195.0, 6291165.0, 6291135.0, 6291105.0],
      dtype=&#x27;float64&#x27;, name=&#x27;y&#x27;, length=132))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-38a1998a-768d-4cf8-9746-9d8ca38fae44' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-38a1998a-768d-4cf8-9746-9d8ca38fae44' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>Podemos visualizar este resultado de manera espacial ejecutando la siguiente celda</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">classified</span><span class="o">.</span><span class="n">y_predict</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa879120430&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_85_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_85_1.png" />
</div>
</div>
</section>
<hr class="docutils" />
<section id="Máscara-por-LandCover">
<h2>Máscara por LandCover<a class="headerlink" href="#Máscara-por-LandCover" title="Link to this heading">#</a></h2>
<p>Utilizaremos un LandCover para excluir aquellas áreas que no sean de interés, es decir, que no sean ni matorrales ni bosque.</p>
<p>Con la siguiente celda podemos cargar un tif con el LandCover con valores 1 en áreas de interés y valores 0 en áreas a excluir.</p>
<p>La función <code class="docutils literal notranslate"><span class="pre">reproject</span></code> se encarga de cambiar el sistema de referencia de coordenadas, alinear los raster, remuestrearlos, y recortarlos a la extensión de los datos objetivos.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># máscara por landcover especial y alinear a classified</span>
<span class="c1"># lc_ = xr.load_dataset(&quot;LC_mix_matybosquenat2013-2014_cog.tif&quot;, engine=&quot;rasterio&quot;).band_data.squeeze()</span>
<span class="n">lc_</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s2">&quot;LC_union_4y7_cog.tif&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;rasterio&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">band_data</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
<span class="n">lc</span> <span class="o">=</span> <span class="n">lc_</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">reproject</span><span class="p">(</span><span class="n">inputImg</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span>
                            <span class="n">transform</span><span class="o">=</span><span class="n">inputImg</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">transform</span><span class="p">(),</span>
                            <span class="n">shape</span><span class="o">=</span><span class="n">inputImg</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
                            <span class="n">resampling</span> <span class="o">=</span> <span class="n">Resampling</span><span class="o">.</span><span class="n">nearest</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>El landcover que se utilizará de máscara se puede visualizar en la siguiente celda:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lc</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa8801bcd90&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_89_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_89_1.png" />
</div>
</div>
<p>La siguiente celda ejecuta la máscara y entrega 3 objetos: * sam_bool: es el booleano de sí hay cambio (1), y no hay cambio (0). * sam_mgs: es el delta ndvi del último negativo registrado. * sam_dates: es la fecha en la cual se registro el último delta ndvi negativo.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Lugares con cambios</span>
<span class="n">sam_bool</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">inputImg</span><span class="o">.</span><span class="n">magnitude</span><span class="o">.</span><span class="n">notnull</span><span class="p">())</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)),</span> <span class="n">classified</span><span class="o">.</span><span class="n">y_predict</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span> <span class="o">=</span> <span class="s2">&quot;uint8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_crs</span><span class="p">(</span><span class="s2">&quot;epsg:32719&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>

<span class="c1">## Magnitudes con cambios</span>
<span class="n">sam_mgs</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">classified</span><span class="o">.</span><span class="n">y_predict</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)),</span> <span class="n">inputImg</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span> <span class="o">=</span> <span class="s2">&quot;float32&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_crs</span><span class="p">(</span><span class="s2">&quot;epsg:32719&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>

<span class="c1">## Fechas con cambios</span>
<span class="n">sam_dates</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">classified</span><span class="o">.</span><span class="n">y_predict</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">lc</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">))</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">inputImg</span><span class="o">.</span><span class="n">magnitude</span><span class="o">.</span><span class="n">notnull</span><span class="p">()),</span> <span class="n">pelt_filtered</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span> <span class="o">=</span> <span class="s2">&quot;float32&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rio</span><span class="o">.</span><span class="n">write_crs</span><span class="p">(</span><span class="s2">&quot;epsg:32719&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Se pueden observar los resultados de la máscara en la siguiente línea:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sam_bool</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">sam_bool</span> <span class="o">!=</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa896d41f60&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_93_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_93_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sam_mgs</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa88151c5e0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_94_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_94_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sam_dates</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x7fa880fe88e0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_95_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_95_1.png" />
</div>
</div>
<p>También podemos ejecutar la siguiente celda para visualizar el polígono de entrada.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sam_bool</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">sam_bool</span> <span class="o">!=</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">poly</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;Axes: title={&#39;center&#39;: &#39;band = 1, spatial_ref = 0&#39;}, xlabel=&#39;x&#39;, ylabel=&#39;y&#39;&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_97_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_97_1.png" />
</div>
</div>
<p>Y hacer zoom al polígono.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plot_xmin</span><span class="p">,</span> <span class="n">plot_ymin</span><span class="p">,</span> <span class="n">plot_xmax</span><span class="p">,</span> <span class="n">plot_ymax</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">distance</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span><span class="o">.</span><span class="n">total_bounds</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">sam_bool</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">sam_bool</span> <span class="o">!=</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">poly</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">plot_xmin</span><span class="p">,</span> <span class="n">plot_xmax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">plot_ymin</span><span class="p">,</span> <span class="n">plot_ymax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(6292528.705270562, 6293600.400276449)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_static_notebooks_01_SAMSARA_app_99_1.png" src="../../_images/_static_notebooks_01_SAMSARA_app_99_1.png" />
</div>
</div>
</section>
<hr class="docutils" />
<section id="Exportar-imágenes">
<h2>Exportar imágenes<a class="headerlink" href="#Exportar-imágenes" title="Link to this heading">#</a></h2>
<p>Finalmente, si queremos exportar los resultados anteriormente observados, debemos ejecutar la siguiente celda. Con ello, obtendremos 3 archivos cog (cloud optimized geotiff).</p>
<p><a class="reference external" href="https://www.cogeo.org/">COG</a> es un tipo especial de archivo de imagen raster (GeoTIFF) optimizada para operaciones en la nube.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">out_folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;outputs&#39;</span><span class="p">)</span>
<span class="n">out_folder</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">datacube</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">cog</span><span class="o">.</span><span class="n">write_cog</span><span class="p">(</span>
    <span class="n">geo_im</span> <span class="o">=</span> <span class="n">sam_bool</span><span class="p">,</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="n">out_folder</span> <span class="o">/</span> <span class="s2">&quot;sam_bool.tif&quot;</span><span class="p">,</span>
    <span class="n">overwrite</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">nodata</span> <span class="o">=</span> <span class="mi">255</span><span class="p">,</span>
    <span class="n">compress</span><span class="o">=</span><span class="s1">&#39;LZW&#39;</span>
<span class="p">)</span>

<span class="n">datacube</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">cog</span><span class="o">.</span><span class="n">write_cog</span><span class="p">(</span>
    <span class="n">geo_im</span> <span class="o">=</span> <span class="n">sam_mgs</span><span class="p">,</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="n">out_folder</span> <span class="o">/</span> <span class="s2">&quot;sam_mgs.tif&quot;</span><span class="p">,</span>
    <span class="n">overwrite</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">nodata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
    <span class="n">compress</span><span class="o">=</span><span class="s1">&#39;LZW&#39;</span>
<span class="p">)</span>

<span class="n">datacube</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">cog</span><span class="o">.</span><span class="n">write_cog</span><span class="p">(</span>
    <span class="n">geo_im</span> <span class="o">=</span> <span class="n">sam_dates</span><span class="p">,</span>
    <span class="n">fname</span> <span class="o">=</span> <span class="n">out_folder</span> <span class="o">/</span> <span class="s2">&quot;sam_dates.tif&quot;</span><span class="p">,</span>
    <span class="n">overwrite</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">nodata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
    <span class="n">compress</span><span class="o">=</span><span class="s1">&#39;LZW&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PosixPath(&#39;outputs/sam_dates.tif&#39;)
</pre></div></div>
</div>
</section>
<hr class="docutils" />
<section id="Cerrar-Data-Cube-Chile">
<h2>Cerrar Data Cube Chile<a class="headerlink" href="#Cerrar-Data-Cube-Chile" title="Link to this heading">#</a></h2>
<p>Como buena práctica, recordemos ejecutaremos la siguiente celda para cerrar la conexión con Data Cube Chile antes de hacer “log out”.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[56]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">cluster</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../../tutorial.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Tutorial</p>
      </div>
    </a>
    <a class="right-next"
       href="../../contributing.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Contributing</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Librerías-requeridas">Librerías requeridas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Configuración-inicial">Configuración inicial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Área-de-interés">Área de interés</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Serie-de-tiempo-de-NDVI">Serie de tiempo de NDVI</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#PELT---Detección-de-cambios-a-nivel-de-píxeles">PELT - Detección de cambios a nivel de píxeles</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Neighborhood-statistics---Estadísticas-de-vecindario">Neighborhood statistics - Estadísticas de vecindario</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#GLCM">GLCM</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Suavizamiento-previo">Suavizamiento previo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Transformación-de-valores">Transformación de valores</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Aplicación-de-GLCM">Aplicación de GLCM</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Aplicación-del-modelo-Random-Forest">Aplicación del modelo Random Forest</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Máscara-por-LandCover">Máscara por LandCover</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Exportar-imágenes">Exportar imágenes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Cerrar-Data-Cube-Chile">Cerrar Data Cube Chile</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/_static/notebooks/01_SAMSARA_app.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023-2024, Data Observatory.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>